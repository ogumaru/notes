"use strict";(self.webpackChunknotes=self.webpackChunknotes||[]).push([[9450],{6029:n=>{n.exports=JSON.parse('{"blogPosts":[{"id":"/2023/01/15/unlock-yubikey-with-master-pw","metadata":{"permalink":"/2023/01/15/unlock-yubikey-with-master-pw","source":"@site/blog/2023-01-15-unlock-yubikey-with-master-pw.md","title":"\u3010YubiKey\u3011PIN\u3092\u9593\u9055\u3048\u305fYubiKey\u306e\u30ed\u30c3\u30af\u3092\u89e3\u9664\u3059\u308b","description":"\u6982\u8981","date":"2023-01-15T00:00:00.000Z","formattedDate":"2023\u5e741\u670815\u65e5","tags":[{"label":"gpg","permalink":"/tags/gpg"},{"label":"git","permalink":"/tags/git"},{"label":"yubikey","permalink":"/tags/yubikey"}],"readingTime":4.13,"hasTruncateMarker":false,"authors":[{"name":"ogumaru","title":"ogumaru note owner","url":"https://github.com/ogumaru","imageURL":"https://github.com/ogumaru.png","key":"ogumaru"}],"frontMatter":{"title":"\u3010YubiKey\u3011PIN\u3092\u9593\u9055\u3048\u305fYubiKey\u306e\u30ed\u30c3\u30af\u3092\u89e3\u9664\u3059\u308b","authors":"ogumaru","tags":["gpg","git","yubikey"]},"nextItem":{"title":"\u3010Docker\u3011EPEL\u7248nginx\u3092Docker Compose\u3078\u79fb\u884c\u3057\u7ba1\u7406\u3059\u308b","permalink":"/2023/01/09/migrate-nginx-docker"}},"content":"## \u6982\u8981\\n\\nGit \u306e\u30b3\u30df\u30c3\u30c8\u7f72\u540d\u306b\u5229\u7528\u3057\u3066\u3044\u308b YubiKey \u306e PIN \u3092 3 \u56de\u9593\u9055\u3048\u3066\u3057\u307e\u3044\u3001\u30ed\u30c3\u30af\u3055\u308c\u3066\u3057\u307e\u3063\u305f\u3002\\n\\n\u30ed\u30c3\u30af\u3055\u308c\u305f\u72b6\u614b\u3067`git commit`\u3059\u308b\u3068\u4e0b\u8a18\u306e\u30a8\u30e9\u30fc\u3068\u306a\u3063\u305f\u3002\\n\\n> error: gpg failed to sign the data  \\n> error: unable to sign the tag\\n\\n\u89e3\u9664\u30b3\u30fc\u30c9\u3092\u5229\u7528\u3057\u3066\u30ed\u30c3\u30af\u306e\u89e3\u9664\u3092\u884c\u3046\u3002\\n\\n## \u74b0\u5883\\n\\n| \u9805\u76ee              | \u7a2e\u985e / \u30d0\u30fc\u30b8\u30e7\u30f3                      |\\n| ----------------- | -------------------------------------- |\\n| \u30cf\u30fc\u30c9\u30a6\u30a7\u30a2\u30ad\u30fc  | Yubikey 5 NFC                          |\\n| `ykman`           | YubiKey Manager (ykman) version: 4.0.7 |\\n| `yubico-piv-tool` | yubico-piv-tool 2.2.0                  |\\n| `gpg`             | gpg (GnuPG) 2.2.27                     |\\n\\n\u307e\u305f\u3001`git config`\u3067\u4e0b\u8a18\u306e\u8a2d\u5b9a\u3092\u3057\u3066\u304a\u308a\u3001\u30b3\u30df\u30c3\u30c8\u306b\u7f72\u540d\u3059\u308b\u3088\u3046\u306b\u306a\u3063\u3066\u3044\u308b\u3002\\n\\n```plaintext\\ncommit.gpgsign=true\\nuser.signingkey=********\\n```\\n\\n\u4e3b\u9375\u306f\u5225\u9014\u4fdd\u7ba1\u3057\u3001\u526f\u9375\u304b\u3089\u751f\u6210\u3057\u305f\u7f72\u540d\u9375\u3092 YubiKey \u306b\u5165\u308c\u3066\u7ba1\u7406\u3057\u3066\u3044\u308b\u3002\\n\\n## \u7d50\u8ad6\\n\\nYubiKey \u306e\u6301\u3064\u6a5f\u80fd\u306e\u5185\u3001GPG \u30b9\u30de\u30fc\u30c8\u30ab\u30fc\u30c9\u3068\u3057\u3066\u306e PIN \u304c\u30ed\u30c3\u30af\u3055\u308c\u3066\u3044\u308b\u305f\u3081\u3001\u4e0b\u8a18\u306e\u901a\u308a\u5bfe\u8a71\u7684\u306b GPG \u30b3\u30de\u30f3\u30c9\u3092\u5b9f\u884c\u3057\u3066\u89e3\u9664\u3059\u308b\u3002\\n\\n```bash\\ngpg --card-edit\\n```\\n\\n\u30d7\u30ed\u30f3\u30d7\u30c8\u304c `gpg/card`\u306b\u306a\u3063\u305f\u3089`admin`\u30b3\u30de\u30f3\u30c9\u3067\u7ba1\u7406\u30b3\u30de\u30f3\u30c9\u3092\u6709\u52b9\u5316\u3059\u308b\u3002\\n\\n```gpg\\ngpg/card> admin\\nAdmin commands are allowed\\n```\\n\\n`passwd`\u30b3\u30de\u30f3\u30c9\u3067`2`\u3092\u9078\u629e\u3057\u3001PIN \u306e\u30d6\u30ed\u30c3\u30af\u3092\u89e3\u9664\u3059\u308b\u3002\\n\\n```gpg\\ngpg/card> passwd\\ngpg: OpenPGP card no. \u2026 detected\\n\\n1 - change PIN\\n2 - unblock PIN\\n3 - change Admin PIN\\n4 - set the Reset Code\\nQ - quit\\n\\nYour selection? 2\\nPIN unblocked and new PIN set.\\n```\\n\\n\u30d6\u30ed\u30c3\u30af\u304c\u89e3\u9664\u3055\u308c\u305f\u3089`q`\u3092\u5165\u529b\u3057\u7d42\u4e86\u3059\u308b\u3002\\n\\n## \u524d\u63d0\u77e5\u8b58: YubiKey \u306e\u5165\u529b\u30b3\u30fc\u30c9\u306b\u3064\u3044\u3066\\n\\nYubiKey \u3067\u306f\u4ee5\u4e0b\u306e\u5165\u529b\u30b3\u30fc\u30c9\u304c\u51fa\u3066\u304f\u308b\\n\\n\u5f53\u521d\u3053\u308c\u3092\u6b63\u3057\u304f\u8a8d\u8b58\u3057\u3066\u304a\u3089\u305a\u3001\u6df7\u4e71\u3057\u305f\u3002\\n\\n| \u540d\u79f0           | \u4e3b\u306a\u7528\u9014                                | \u521d\u671f\u5024                     |\\n| -------------- | --------------------------------------- | -------------------------- |\\n| PIN (User PIN) | \u30e6\u30fc\u30b6\u8a8d\u8a3c (\u3053\u308c\u3092\u9593\u9055\u3048\u3066\u30ed\u30c3\u30af\u3055\u308c\u305f) | `123456`                   |\\n| Admin PIN      | \u4e0d\u660e (\u4eca\u56de\u3053\u308c\u3092\u5229\u7528)                   | `12345678`                 |\\n| PUK            | PIN \u306e\u30d6\u30ed\u30c3\u30af\u89e3\u9664 (\u4eca\u56de\u5229\u7528\u3057\u306a\u3044)     | `12345678`                 |\\n| Management key | \u30a8\u30f3\u30c6\u30a3\u30c6\u30a3\u306e\u8a8d\u8a3c (\u4eca\u56de\u5229\u7528\u3057\u306a\u3044)     | `0102030405060708` \u306e 3DES |\\n\\n\u53c2\u8003:\\n\\n- [The PIV PIN, PUK, and management key - (docs.yubico.com)](https://docs.yubico.com/yesdk/users-manual/application-piv/pin-puk-mgmt-key.html)\\n- [YubiKey - ArchWiki - (wiki.archlinux.jp)](https://wiki.archlinux.jp/index.php/YubiKey)\\n\\n## \u3060\u3081\u3060\u3063\u305f\u65b9\u6cd5\\n\\n### ykman\\n\\n\u8a2d\u5b9a\u6642\u306b\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u3066\u3044\u305f\u305f\u3081\u3001\u6700\u521d\u3053\u306e\u30c4\u30fc\u30eb\u3067\u306e\u89e3\u9664\u3092\u56f3\u3063\u305f\u3002\\n\\n\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u5185\u304b\u3089[Unblock the PIN (using PUK).](https://docs.yubico.com/software/yubikey/tools/ykman/PIV_Commands.html#ykman-piv-access-unblock-pin-options)\u3068\u66f8\u304b\u308c\u3066\u3044\u308b\u3082\u306e\u304c\u3042\u3063\u305f\u305f\u3081\u3053\u308c\u3092\u5b9f\u884c\u3057\u305f\u3002\\n\\n> WARNING: PC/SC not available. Smart card protocols will not function.\\n\\n\u306e\u3088\u3046\u306a\u30a8\u30e9\u30fc\u304c\u51fa\u305f\u5834\u5408\u306f[\u3053\u3053](https://www.reddit.com/r/yubikey/comments/p94xwl/yubikey_wont_register_on_arch_linuxs_desktop_auth/)\u3092\u53c2\u8003\u306b`sudo systemctl start pcscd.service`\u3059\u308b\u3053\u3068\u3067\u7121\u4e8b\u5b9f\u884c\u3067\u304d\u308b\u3088\u3046\u306b\u306a\u308b\u3002\\n\\n```bash\\nykman piv access unblock-pin\\n# > Enter PUK:\\n# > Enter a new PIN:\\n# > PIN unblocked\\n```\\n\\n\u3057\u304b\u3057`git commit`\u3092\u5b9f\u884c\u3057\u3066\u3082 PIN \u306e\u30ed\u30c3\u30af\u306f\u89e3\u9664\u3067\u304d\u3066\u3044\u306a\u304b\u3063\u305f\u3002\\n\\n### yubico-piv-tool\\n\\n\u4e0a\u8a18\u3068\u306f[\u5225\u306e\u30c4\u30fc\u30eb\u304c\u3042\u3063\u305f](https://tech.yubion.com/documents/piv/admin_guide/yubikey/change-puk/)\u305f\u3081\u3053\u308c\u3092\u5229\u7528\u3057\u3066\u89e3\u9664\u3092\u8a66\u307f\u305f\u3002\\n\\n```bash\\nyubico-piv-tool -a unblock-pin\\n# > Enter puk:\\n# > Enter new pin:\\n# > Verifying - Enter new pin:\\n# > Successfully unblocked the pin code.\\n```\\n\\n\u82e5\u5e72\u51fa\u529b\u306f\u7570\u306a\u308b\u3082\u306e\u306e\u3001\u6982\u306d`ykman`\u3068\u540c\u69d8\u306e\u51fa\u529b\u3068\u306a\u308a\u3001\u540c\u3058\u304f\u30ed\u30c3\u30af\u306e\u89e3\u9664\u306f\u3067\u304d\u3066\u3044\u306a\u304b\u3063\u305f\u3002\\n\\n## \u518d\u767a\u9632\u6b62\u306e\u305f\u3081\u306e\u66ab\u5b9a\u7684\u306a\u5bfe\u5fdc\\n\\n\u5927\u6587\u5b57/\u5c0f\u6587\u5b57\u3001\u6253\u3061\u9593\u9055\u3044\u306a\u3069\u3092\u8003\u616e\u3059\u308b\u3068\u30ea\u30c8\u30e9\u30a4\u56de\u6570\u304c 3 \u56de\u3067\u306f\u4e0d\u8db3\u304c\u8003\u3048\u3089\u308c\u305f\u306e\u3067\u3001\u4e0b\u8a18\u306e\u901a\u308a\u8a2d\u5b9a\u3092\u5909\u66f4\u3057\u305f\u3002\\n\\n```bash\\nyubico-piv-tool -a verify -P \\"${YUBIKEY_PIN}\\" -a pin-retries --pin-retries=5 --puk-retries=5\\n```\\n\\n\u53c2\u8003: [PIN/PUK \u306e\u30ea\u30c8\u30e9\u30a4\u56de\u6570\u306e\u5909\u66f4 - YubiKey PIV Manual - (tech.yubion.com)](https://tech.yubion.com/documents/piv/admin_guide/yubikey/change-retry-count/)"},{"id":"/2023/01/09/migrate-nginx-docker","metadata":{"permalink":"/2023/01/09/migrate-nginx-docker","source":"@site/blog/2023-01-09-migrate-nginx-docker/index.md","title":"\u3010Docker\u3011EPEL\u7248nginx\u3092Docker Compose\u3078\u79fb\u884c\u3057\u7ba1\u7406\u3059\u308b","description":"\u6982\u8981","date":"2023-01-09T00:00:00.000Z","formattedDate":"2023\u5e741\u67089\u65e5","tags":[{"label":"docker","permalink":"/tags/docker"},{"label":"docker-compose","permalink":"/tags/docker-compose"},{"label":"nginx","permalink":"/tags/nginx"},{"label":"certbot","permalink":"/tags/certbot"},{"label":"shiori","permalink":"/tags/shiori"}],"readingTime":3.825,"hasTruncateMarker":false,"authors":[{"name":"ogumaru","title":"ogumaru note owner","url":"https://github.com/ogumaru","imageURL":"https://github.com/ogumaru.png","key":"ogumaru"}],"frontMatter":{"title":"\u3010Docker\u3011EPEL\u7248nginx\u3092Docker Compose\u3078\u79fb\u884c\u3057\u7ba1\u7406\u3059\u308b","authors":"ogumaru","tags":["docker","docker-compose","nginx","certbot","shiori"]},"prevItem":{"title":"\u3010YubiKey\u3011PIN\u3092\u9593\u9055\u3048\u305fYubiKey\u306e\u30ed\u30c3\u30af\u3092\u89e3\u9664\u3059\u308b","permalink":"/2023/01/15/unlock-yubikey-with-master-pw"},"nextItem":{"title":"\u3010WASM\u3011wasm-pack pack\u304cos error 2\u3067\u5931\u6557\u3059\u308b","permalink":"/2022/11/27/wasm-pack-cannot-pack-oserr2"}},"content":"## \u6982\u8981\\n\\nAmazon Linux 2 \u306e EPEL \u7248 nginx \u3092 Docker \u306e nginx \u306b\u79fb\u884c\u3059\u308b\u3002\\n\\n\u4f75\u305b\u3066\u3001Docker \u3067\u7a3c\u50cd\u3059\u308b\u4ed6\u306e\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u30b3\u30f3\u30c6\u30ca\u3082 Docker Compose \u3092\u5229\u7528\u3057\u3066\u540c\u4e00\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u306b\u3066\u7ba1\u7406\u3059\u308b\u3002\\n\\n## \u74b0\u5883\\n\\n| \u9805\u76ee                   | \u30d0\u30fc\u30b8\u30e7\u30f3 / \u7a2e\u985e                      |\\n| ---------------------- | -------------------------------------- |\\n| EC2 \u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u30bf\u30a4\u30d7 | t4g.nano                               |\\n| OS                     | Amazon Linux release 2 (Karoo)         |\\n| nginx (EPEL)           | nginx version: nginx/1.12.2            |\\n| nginx (docker)         | nginx:1.23.3                           |\\n| Docker                 | Docker version 20.10.13, build a224086 |\\n| Docker Compose         | Docker Compose version v2.14.2         |\\n\\n## \u8a73\u7d30\\n\\nAmazon EC2 \u4e0a\u306b \u30ea\u30d0\u30fc\u30b9\u30d7\u30ed\u30ad\u30b7\u3068\u3057\u3066\u632f\u308b\u821e\u3046 nginx \u306e Web \u30b5\u30fc\u30d0\u304c\u3042\u308a\u3001\u3053\u308c\u3092\u901a\u3058\u3066[Docker \u7248\u306e Shiori](https://github.com/go-shiori/shiori/pkgs/container/shiori)\u3092\u5229\u7528\u3067\u304d\u308b\u3088\u3046\u306b\u3057\u3066\u3044\u308b\u3002\\n\\n![\u6982\u8981\u56f3](./outline.png \\"\u6982\u8981\u56f3\\")\\n\\n\u4e0a\u56f3\u5de6\u306e\u901a\u308a\u3001\u79fb\u884c\u524d\u306e\u69cb\u6210\u3067\u306f\u30d1\u30c3\u30b1\u30fc\u30b8\u7248\u306e nginx \u304c\u5916\u90e8\u304b\u3089\u30ea\u30af\u30a8\u30b9\u30c8\u3092\u53d7\u3051\u308b\u3002\\n\\n\u3053\u306e nginx \u304b\u3089`proxy_pass`\u306b\u3088\u308a\u3001\u5185\u90e8\u3067\u7a3c\u50cd\u3059\u308b\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u30b3\u30f3\u30c6\u30ca(`shiori`)\u3078\u8ee2\u9001\u3057\u3066\u3044\u308b\u3002\\n\\n\u79fb\u884c\u5f8c\u306e\u69cb\u6210\u3068\u3057\u3066\u306f\u4e0a\u56f3\u53f3\u306e\u3088\u3046\u306b\u3001\u30db\u30b9\u30c8\u5074\u306e`443`\u756a\u30dd\u30fc\u30c8\u3092 Docker Compose \u306e\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u5185\u3067\u7a3c\u50cd\u3059\u308b nginx \u3078\u63a5\u7d9a\u3057\u3001\u3053\u3053\u3067\u5916\u90e8\u304b\u3089\u306e\u30ea\u30af\u30a8\u30b9\u30c8\u3092\u53d7\u3051\u308b\u3002\\n\\n\u3053\u306e nginx \u304b\u3089`proxy_pass`\u306b\u3088\u308a\u3001\u540c\u3058\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u5185\u306b\u3042\u308b\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u30b3\u30f3\u30c6\u30ca\u3078\u8ee2\u9001\u3059\u308b\u3002\\n\\n\u5916\u90e8\u3068\u306f Let\'s Encrypt \u306e\u8a3c\u660e\u66f8\u3092\u5229\u7528\u3057\u305f HTTPS \u63a5\u7d9a\u3092\u884c\u3046\u3002\\n\\nCertbot \u306f\u3072\u3068\u307e\u305a\u73fe\u884c\u3068\u540c\u3058\u304f EPEL \u30ea\u30dd\u30b8\u30c8\u30ea\u306e\u3082\u306e\u3092\u5229\u7528\u3059\u308b\u3002\\n\\n## \u5404\u7a2e\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\\n\\n\u30d5\u30a1\u30a4\u30eb\u306e\u914d\u7f6e\u306f\u4ee5\u4e0b\u306e\u901a\u308a\u3068\u3059\u308b\\n\\n```plaintext\\n\u251c\u2500\u2500 docker-compose.yaml\\n\u251c\u2500\u2500 nginx\\n\u2502   \u2514\u2500\u2500 conf.d\\n\u2502       \u2514\u2500\u2500 shiori.example.com\\n\u2514\u2500\u2500 shiori\\n    \u251c\u2500\u2500 archive\\n    \u251c\u2500\u2500 shiori.db\\n    \u2514\u2500\u2500 thumb\\n```\\n\\n### `docker-compose.yaml`\\n\\n```yml\\nversion: \\"3\\"\\n\\nservices:\\n  nginx:\\n    image: nginx:1.23.3\\n    container_name: nginx\\n    volumes:\\n      - /etc/letsencrypt:/etc/letsencrypt:ro\\n      - /var/www:/var/www:ro\\n      - ./nginx/conf.d:/etc/nginx/conf.d:ro\\n    ports:\\n      - 80:80\\n      - 443:443\\n    restart: always\\n\\n  shiori:\\n    image: ghcr.io/go-shiori/shiori:v1.5.3-35-g27c2fc7\\n    container_name: shiori\\n    volumes:\\n      - \\"${HOME}/shiori:/shiori\\"\\n    environment:\\n      - PUID=1000\\n      - PGID=1000\\n    restart: always\\n```\\n\\n`/etc/letsencrypt`\u306f Let\'s Encrypt \u306e\u8a3c\u660e\u66f8\u95a2\u9023\u306e\u30d5\u30a1\u30a4\u30eb\u3092\u53c2\u7167\u3059\u308b\u305f\u3081\u306b\u30de\u30a6\u30f3\u30c8\u3059\u308b\u3002\\n\\n`/var/www`\u306f`certbot`\u306b\u3088\u308b\u8a3c\u660e\u66f8\u66f4\u65b0\u306e\u969b\u3001`.well-known`\u3092`nginx`\u304b\u3089\u5916\u90e8\u306b\u516c\u958b\u3059\u308b\u305f\u3081\u306b\u30de\u30a6\u30f3\u30c8\u3059\u308b\u3002\\n\\n\u3053\u306e\u66f4\u65b0\u306e\u305f\u3081\u306b\u3001`80`\u756a\u30dd\u30fc\u30c8\u3082\u30d0\u30a4\u30f3\u30c9\u3059\u308b\u3002\\n\\n`/nginx/conf.d`\u306b\u306f\u5f8c\u8ff0\u3059\u308b\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u3092\u914d\u7f6e\u3059\u308b\u3002\\n\\n`shiori`\u306e\u90e8\u5206\u306b\u3064\u3044\u3066\u306f\u3001\u3082\u3068\u3082\u3068\u4e0b\u8a18\u306e\u3088\u3046\u306a\u30b9\u30af\u30ea\u30d7\u30c8\u3067\u7a3c\u50cd\u3057\u3066\u3044\u305f\u3082\u306e\u304b\u3089\u79fb\u884c\u3057\u305f\u3002\\n\\n```bash\\ndocker run --rm -d /\\n  --restart=always \\\\\\n  --name shiori \\\\\\n  -v \\"$(pwd)/shiori:/shiori\\" \\\\\\n  -u \\"$(id -u):$(id -g)\\" \\\\\\n  -p 8080:8080 \\\\\\n  shiori:v1.5.3-35-g27c2fc7\\n```\\n\\n`nginx`\u304c\u540c\u4e00\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u306b\u306a\u308b\u305f\u3081\u3001`shiori`\u306e`8080`\u756a\u30dd\u30fc\u30c8\u306f\u5916\u90e8\u306b\u516c\u958b(`publish`)\u306f\u3057\u306a\u3044\u3002\\n\\n### nginx \u306e\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\\n\\nnginx \u306e\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u306f\u4ee5\u4e0b\u306e\u901a\u308a`https://shiori.example.com`\u3067\u30a2\u30af\u30bb\u30b9\u3067\u304d\u308b\u8a2d\u5b9a\u3068\u3059\u308b\u3002\\n\\n```nginx\\nserver {\\n        listen 80;\\n        server_name shiori.example.com;\\n\\n        location ^~ /.well-known {\\n                alias           /var/www/.well-known;\\n        }\\n\\n        location / {\\n                return 301 https://$host$request_uri;\\n        }\\n}\\n\\nserver {\\n        server_name shiori.example.com;\\n        listen 443 http2 ssl;\\n        \x3c!-- \u5404\u7a2e\u8a2d\u5b9a --\x3e\\n\\n        ssl_certificate         /etc/letsencrypt/live/shiori.example.com/fullchain.pem;\\n        ssl_certificate_key     /etc/letsencrypt/live/shiori.example.com/privkey.pem;\\n\\n        location / {\\n                proxy_pass      http://shiori:8080/;\\n                proxy_set_header HOST $host;\\n                proxy_set_header X-Forwarded-Host $host;\\n                proxy_set_header X-Real-IP $remote_addr;\\n                proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;\\n\\n                \x3c!-- \u5404\u7a2e\u8a2d\u5b9a --\x3e\\n        }\\n}\\n```\\n\\n### Certbot\\n\\nCertbot \u306b\u3088\u308b\u8a3c\u660e\u66f8\u306e\u81ea\u52d5\u66f4\u65b0\u3092`certbot-renew.timer`\u306b\u3066\u884c\u3063\u3066\u3044\u305f\u305f\u3081\u3001Hook \u306e\u8a2d\u5b9a\u3082\u4e0b\u8a18\u306e\u901a\u308a\u5909\u66f4\u3059\u308b\u3002\\n\\n```bash\\nsudoedit /etc/letsencrypt/renewal-hooks/post/reload-nginx.sh\\n```\\n\\n```diff\\n  #!/bin/bash\\n\\n- systemctl reload nginx\\n+ docker exec nginx nginx -s reload\\n```\\n\\n## \u52d5\u4f5c\u78ba\u8a8d\\n\\n```bash\\n# \u65e2\u5b58\u306eWeb\u30b5\u30fc\u30d0\u306e\u505c\u6b62\\nsudo systemctl stop nginx\\n\\n# \u65e2\u5b58\u306e\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u30b3\u30f3\u30c6\u30ca\u306e\u505c\u6b62\\ndocker stop shiori\\n\\ndocker compose up -d\\n\\n# \u8a3c\u660e\u66f8\u306e\u66f4\u65b0\u3001Hook\u306e\u78ba\u8a8d\\nsudo certbot --dry-run renew\\n```"},{"id":"/2022/11/27/wasm-pack-cannot-pack-oserr2","metadata":{"permalink":"/2022/11/27/wasm-pack-cannot-pack-oserr2","source":"@site/blog/2022-11-27-wasm-pack-cannot-pack-oserr2.md","title":"\u3010WASM\u3011wasm-pack pack\u304cos error 2\u3067\u5931\u6557\u3059\u308b","description":"\u6982\u8981","date":"2022-11-27T00:00:00.000Z","formattedDate":"2022\u5e7411\u670827\u65e5","tags":[{"label":"javascript","permalink":"/tags/javascript"},{"label":"wasm","permalink":"/tags/wasm"},{"label":"rust","permalink":"/tags/rust"}],"readingTime":1.895,"hasTruncateMarker":false,"authors":[{"name":"ogumaru","title":"ogumaru note owner","url":"https://github.com/ogumaru","imageURL":"https://github.com/ogumaru.png","key":"ogumaru"}],"frontMatter":{"title":"\u3010WASM\u3011wasm-pack pack\u304cos error 2\u3067\u5931\u6557\u3059\u308b","authors":"ogumaru","tags":["javascript","wasm","rust"]},"prevItem":{"title":"\u3010Docker\u3011EPEL\u7248nginx\u3092Docker Compose\u3078\u79fb\u884c\u3057\u7ba1\u7406\u3059\u308b","permalink":"/2023/01/09/migrate-nginx-docker"},"nextItem":{"title":"\u3010React\u3011CalciteSwitch\u3067\u898b\u305f\u76ee\u304c\u5909\u308f\u3089\u306a\u3044","permalink":"/2022/11/27/calcite-switch-state"}},"content":"## \u6982\u8981\\n\\ndevcontainer \u5185\u306b\u3066\u3001WebAssembly \u306e npm \u30d1\u30c3\u30b1\u30fc\u30b8\u3092`wasm-pack pack`\u3059\u308b\u3068\u30a8\u30e9\u30fc\u304c\u767a\u751f\u3059\u308b\u3002\\n\\n## \u7d50\u8ad6\\n\\nNode.js \u3092 devcontainer \u5074\u306b\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3059\u308b\u3002\\n\\n## \u74b0\u5883\\n\\n| \u9805\u76ee      | \u30d0\u30fc\u30b8\u30e7\u30f3                      |\\n| --------- | ------------------------------- |\\n| cargo     | 1.64.0 (387270bc7 2022-09-16)   |\\n| wasm-pack | 0.10.3                          |\\n| docker    | version 20.10.14, build a224086 |\\n\\n## \u8a73\u7d30\\n\\n`mcr.microsoft.com/vscode/devcontainers/rust:0-bullseye`\u3092\u5143\u306b\u3057\u305f devcontainer \u5185\u306b\u3001\u4e0b\u8a18\u306b\u3066`wasm-pack`\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u3066\u3044\u305f\u3002\\n\\n```bash\\ncargo install wasm-pack\\n```\\n\\n\u3053\u306e\u30b3\u30f3\u30c6\u30ca\u5185\u3067`wasm-pack build`\u306f\u3067\u304d\u308b\u3082\u306e\u306e\u3001`wasm-pack pack`\u306f\u4e0b\u8a18\u306e\u30a8\u30e9\u30fc\u304c\u767a\u751f\u3057\u305f\u3002\\n\\n> Error: Packaging up your code failed  \\n> Caused by: No such file or directory (os error 2)\\n\\n## \u5bfe\u5fdc\\n\\n\u516c\u5f0f\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u3084 Web \u4e0a\u3092\u691c\u7d22\u3057\u3066\u3082\u60c5\u5831\u304c\u306a\u304f\u56f0\u3063\u305f\u304c\u3001`npm pack`\u3092\u5185\u90e8\u3067\u547c\u3073\u51fa\u3057\u3066\u3044\u308b\u306e\u304b\u3068\u8003\u3048\u3001\u4e0b\u8a18\u30b3\u30de\u30f3\u30c9\u3092\u5229\u7528\u3067\u304d\u308b\u3088\u3046\u306b\u3057\u305f\u3068\u3053\u308d\u3001\u7121\u4e8b`wasm-pack pack`\u306b\u3066 npm \u30d1\u30c3\u30b1\u30fc\u30b8\u3092\u4f5c\u6210\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u305f\u3002\\n\\n- `node`\\n- `npm`\\n- `npx`\\n\\n`npm`\u3068\u30b5\u30d6\u30b3\u30de\u30f3\u30c9\u304c\u4f3c\u3066\u3044\u308b\u3053\u3068\u304b\u3089\u5f53\u7136\u3068\u3044\u3048\u3070\u305d\u3046\u304b\u3082\u3057\u308c\u306a\u3044\u304c\u3001\u6c17\u3065\u304b\u305a\u306b\u7d50\u69cb\u6642\u9593\u3092\u4f7f\u3063\u3066\u3057\u307e\u3063\u305f\u3002\\n\\n\u306a\u304a\u3001`apt`\u3067\u5165\u308b\u3082\u306e\u306f\u30d0\u30fc\u30b8\u30e7\u30f3\u304c\u53e4\u3044\u305f\u3081\u3001(\u5dee\u5206\u304c\u5927\u304d\u3044\u304c)\u4e0b\u8a18\u30b3\u30df\u30c3\u30c8\u306e\u3088\u3046\u306b\u30a2\u30fc\u30ab\u30a4\u30d6\u3092\u5c55\u958b\u3059\u308b\u5f62\u3067\u5bfe\u5fdc\u3057\u305f\u3002\\n\\n[update: devcontainer configuration (ff650765c668002ea1b8e8f056ef8a4907b6a6f8)](https://github.com/ogumaru/wanco/commit/ff650765c668002ea1b8e8f056ef8a4907b6a6f8)\\n\\nNode.js \u306b\u95a2\u3059\u308b\u8a72\u5f53\u7b87\u6240\u306f\u4e0b\u8a18\\n\\n```dockerfile\\nFROM busybox:1.34.1 as nodejs\\nENV NODEJS_TARBALL_URL=\\"https://nodejs.org/dist/v18.12.1/node-v18.12.1-linux-x64.tar.xz\\"\\nUSER root\\nWORKDIR /root/.local\\nRUN mkdir -p bin/ node/ \\\\\\n    && wget -O node.tar.xz \\"${NODEJS_TARBALL_URL}\\" --no-check-certificate \\\\\\n    && xz -d -c node.tar.xz | tar xvf - -C node --strip-components 1 \\\\\\n    && ln -s \\"/root/.local/node/bin/node\\" bin/ \\\\\\n    && ln -s \\"/root/.local/node/bin/npm\\" bin/ \\\\\\n    && ln -s \\"/root/.local/node/bin/npx\\" bin/ \\\\\\n    && rm node.tar.xz\\n```"},{"id":"/2022/11/27/calcite-switch-state","metadata":{"permalink":"/2022/11/27/calcite-switch-state","source":"@site/blog/2022-11-27-calcite-switch-state/index.md","title":"\u3010React\u3011CalciteSwitch\u3067\u898b\u305f\u76ee\u304c\u5909\u308f\u3089\u306a\u3044","description":"\u6982\u8981","date":"2022-11-27T00:00:00.000Z","formattedDate":"2022\u5e7411\u670827\u65e5","tags":[{"label":"typescript","permalink":"/tags/typescript"},{"label":"javascript","permalink":"/tags/javascript"},{"label":"react","permalink":"/tags/react"}],"readingTime":2.245,"hasTruncateMarker":false,"authors":[{"name":"ogumaru","title":"ogumaru note owner","url":"https://github.com/ogumaru","imageURL":"https://github.com/ogumaru.png","key":"ogumaru"}],"frontMatter":{"title":"\u3010React\u3011CalciteSwitch\u3067\u898b\u305f\u76ee\u304c\u5909\u308f\u3089\u306a\u3044","authors":"ogumaru","tags":["typescript","javascript","react"]},"prevItem":{"title":"\u3010WASM\u3011wasm-pack pack\u304cos error 2\u3067\u5931\u6557\u3059\u308b","permalink":"/2022/11/27/wasm-pack-cannot-pack-oserr2"},"nextItem":{"title":"\u3010JavaScript\u3011ArcGIS\u3067\u52d5\u7684\u306bMapView\u3092\u914d\u7f6e\u3059\u308b","permalink":"/2022/10/20/arcgis-set-dynamically"}},"content":"## \u6982\u8981\\n\\n\u6709\u52b9/\u7121\u52b9\u306e 2 \u3064\u306e\u72b6\u614b\u3092\u6301\u3064\u8981\u7d20\u3092\u5229\u7528\u3057\u3066\u3001`createContext`\u3067\u4f5c\u6210\u3057\u305f\u72b6\u614b\u3092\u4fdd\u6301\u30fb\u5207\u308a\u66ff\u3048\u3055\u305b\u305f\u3044\u3002\\n\\nCalcite Design System \u306e`CalciteSwitch`\u3092\u5229\u7528\u3057\u3001\u72b6\u614b\u3092\u30af\u30ea\u30c3\u30af\u3067\u5909\u66f4\u3057\u3088\u3046\u3068\u3057\u305f\u304c\u3001\u5b9f\u969b\u306f\u30af\u30ea\u30c3\u30af\u3092\u3057\u3066\u3082\u898b\u305f\u76ee\u304c\u6709\u52b9\u306a\u307e\u307e\u5909\u308f\u3089\u306a\u304b\u3063\u305f\u3002\\n\\n\u610f\u56f3\u3057\u305f\u52d5\u4f5c\u3068\u3057\u3066\u306f\u3001\u9078\u629e\u72b6\u614b\u306b\u5fdc\u3058\u3066\u4e0b\u306e\u8868\u306e\u3088\u3046\u306b\u306a\u308b\u3002\\n\\n| \u30b9\u30a4\u30c3\u30c1\u306e\u72b6\u614b | \u8868\u793a                               |\\n| -------------- | ---------------------------------- |\\n| \u6709\u52b9           | ![\u9752\u3001\u53f3](switch-on.png \\"\u9752\u3001\u53f3\\")  |\\n| \u7121\u52b9           | ![\u767d\u3001\u5de6](switch-off.png \\"\u767d\u3001\u5de6\\") |\\n\\n## \u74b0\u5883\\n\\n| \u9805\u76ee                           | \u30d0\u30fc\u30b8\u30e7\u30f3 |\\n| ------------------------------ | ---------- |\\n| @esri/calcite-components-react | 0.32.0     |\\n| react                          | 18.2.0     |\\n\\n## \u539f\u56e0\u30fb\u5bfe\u7b56\\n\\n`onClick`\u3067\u30a4\u30d9\u30f3\u30c8\u306e\u51e6\u7406\u3092\u3057\u3064\u3064`checked={context.isSetAttr}`\u306e\u3088\u3046\u306b`checked`\u30d7\u30ed\u30d1\u30c6\u30a3\u3067\u72b6\u614b\u7ba1\u7406\u3092\u3059\u308b\u3068\u9069\u5207\u306b\u8868\u793a\u3055\u308c\u306a\u304f\u306a\u308b\u3002\\n\\n`checked=true`\u3084`checked`\u3067\u3042\u308c\u3070\u5f53\u7136\u9752\u306b\u306a\u308b\u304c\u3001`checked=false`\u3067\u3042\u3063\u3066\u3082\u8868\u793a\u304c\u4e0a\u306e\u8868\u306e\u300c\u6709\u52b9\u300d\u306e\u3082\u306e\u306b\u306a\u308b\u3002\\n\\n\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u306b\u306f`checked`\u306f`true`, `false`\u3092\u6301\u3064\u3068\u3042\u308b\u304c\u3001\u5b9f\u969b\u306b\u306f`false`\u3060\u3068\u610f\u56f3\u3057\u305f\u901a\u308a\u306e\u8868\u793a\u306b\u306a\u3089\u306a\u3044\u3002\\n\\n\u4e0b\u8a18\u30b3\u30fc\u30c9\u3067\u306f\u72b6\u614b\u306b\u95a2\u308f\u3089\u305a\u300c\u6709\u52b9\u300d\u306e\u3082\u306e\u304c\u8868\u793a\u3055\u308c\u308b\u3002\\n\\n(`context`\u306f\u4e0a\u4f4d\u30b3\u30f3\u30dd\u30fc\u30cd\u30f3\u30c8\u3088\u308a\u6e21\u3057\u3066\u304a\u308a\u3001`isSetAttr`\u306f`boolean`)\\n\\n```tsx\\n<CalciteSwitch\\n  checked={context.isSetAttr}\\n  onClick={(e) => {\\n    const input = e.target as HTMLInputElement;\\n    context.setIsSetAttr(input.checked);\\n  }}\\n/>\\n```\\n\\n\u6b63\u3057\u304f\u306f\u4e0b\u8a18\u306e\u3088\u3046\u306b`onCalciteSwitchChange`\u3067\u30a4\u30d9\u30f3\u30c8\u306e\u51e6\u7406\u3092\u3057\u3064\u3064\u3001`checked`\u306b\u72b6\u614b\u3092\u6301\u305f\u305b\u306a\u3044\u3002\\n\\n```tsx\\n<CalciteSwitch\\n  onCalciteSwitchChange={(e) => {\\n    const input = e.target;\\n    context.setIsSetAttr(input.checked);\\n  }}\\n/>\\n```\\n\\n> Fires when the `checked` value has changed. **Note:** The event payload is deprecated, use the component\'s `checked` property instead.\\n\\n[Switch | Calcite Design System | ArcGIS Developers - (developers.arcgis.com)](https://developers.arcgis.com/calcite-design-system/components/switch/#component-api-events-calciteSwitchChange)\\n\\n\u3053\u308c\u3067\u610f\u56f3\u3057\u305f\u8868\u793a\u306b\u306f\u306a\u308b\u304c\u3001\u30b3\u30f3\u30dd\u30fc\u30cd\u30f3\u30c8\u81ea\u4f53\u306b\u72b6\u614b\u3092\u4fdd\u6301\u3057\u3066\u304a\u3089\u305a\u3001\u8907\u6570\u7b87\u6240\u304b\u3089\u306e\u64cd\u4f5c\u304c\u3042\u308b\u5834\u5408\u306b\u82e5\u5e72\u4e0d\u5b89\u304c\u3042\u308b\u3002"},{"id":"/2022/10/20/arcgis-set-dynamically","metadata":{"permalink":"/2022/10/20/arcgis-set-dynamically","source":"@site/blog/2022-10-20-arcgis-set-dynamically.md","title":"\u3010JavaScript\u3011ArcGIS\u3067\u52d5\u7684\u306bMapView\u3092\u914d\u7f6e\u3059\u308b","description":"\u6982\u8981","date":"2022-10-20T00:00:00.000Z","formattedDate":"2022\u5e7410\u670820\u65e5","tags":[{"label":"typescript","permalink":"/tags/typescript"},{"label":"javascript","permalink":"/tags/javascript"},{"label":"arcgis","permalink":"/tags/arcgis"},{"label":"react","permalink":"/tags/react"}],"readingTime":3.1,"hasTruncateMarker":false,"authors":[{"name":"ogumaru","title":"ogumaru note owner","url":"https://github.com/ogumaru","imageURL":"https://github.com/ogumaru.png","key":"ogumaru"}],"frontMatter":{"title":"\u3010JavaScript\u3011ArcGIS\u3067\u52d5\u7684\u306bMapView\u3092\u914d\u7f6e\u3059\u308b","authors":"ogumaru","tags":["typescript","javascript","arcgis","react"]},"prevItem":{"title":"\u3010React\u3011CalciteSwitch\u3067\u898b\u305f\u76ee\u304c\u5909\u308f\u3089\u306a\u3044","permalink":"/2022/11/27/calcite-switch-state"},"nextItem":{"title":"\u3010JavaScript\u3011Wayland + Chromium\u74b0\u5883\u3067\u30d5\u30a1\u30a4\u30eb\u306e\u30d5\u30a1\u30a4\u30eb\u30c9\u30ed\u30c3\u30d7\u304c\u305f\u307e\u306b\u5931\u6557\u3059\u308b","permalink":"/2022/10/16/dnd-behavior-on-wayland"}},"content":"## \u6982\u8981\\n\\n[ArcGIS API for JavaScript](https://developers.arcgis.com/javascript/latest/) (`@arcgis/core`)\u3067 `MapView` \u3092\u5229\u7528\u3059\u308b\u969b\u3001\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u5316\u6642\u306b `container` \u30d7\u30ed\u30d1\u30c6\u30a3\u306b\u30bb\u30ec\u30af\u30bf\u306e\u6587\u5b57\u5217\u304b`HTMLElement`\u3092\u6307\u5b9a\u3059\u308b\u3053\u3068\u3067\u3001\u305d\u3053\u306b\u5730\u56f3\u3092\u8868\u793a\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u308b\u3002\\n\\nReact \u3092\u5229\u7528\u3059\u308b\u90fd\u5408\u4e0a\u3001\u9759\u7684\u306a HTML \u3067\u306f\u306a\u304f\u3001\u8868\u793a\u5bfe\u8c61\u3068\u306a\u308b\u8981\u7d20(React \u30b3\u30f3\u30dd\u30fc\u30cd\u30f3\u30c8)\u304c\u63cf\u753b\u3055\u308c\u305f\u3042\u3068\u3001\u305d\u3053\u306b\u8868\u793a\u3055\u308c\u308b\u3088\u3046\u306b\u3057\u305f\u3044\u3002\\n\\n\u5b9f\u88c5\u306f ES Modules \u304a\u3088\u3073 TypeScript \u3092\u5229\u7528\u3057\u3066\u884c\u3063\u305f\u3002\\n\\n## \u7d50\u8ad6\\n\\n`useEffect`\u5185\u3067`__esri.Accessor.set()`\u304b\u3089`container`\u3092\u6307\u5b9a\u3059\u308b\u3002\\n\\n```tsx\\nimport { useEffect } from \\"react\\";\\nimport MapView from \\"@arcgis/core/views/MapView\\";\\n\\n// \u3053\u3053\u3067\u306f container \u306f\u6307\u5b9a\u3057\u306a\u3044\u3002\\n// \u30ec\u30a4\u30e4\u306e\u64cd\u4f5c\u3092\u3059\u308b\u90fd\u5408\u4e0a\u3001\\n// export \u3059\u308b\u5fc5\u8981\u304c\u3042\u308b\u305f\u3081setup\u5185\u3067\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u5316\u3067\u304d\u306a\u3044\u3002\\nexport const mapView = new MapView({\\n  /** \u7565 **/\\n});\\n\\nconst setup = () => {\\n  // \u52d5\u7684\u306b container \u3092\u6307\u5b9a\\n  mapView.set(\\"container\\", \\"viewDiv\\");\\n};\\n\\nexport const App = () => {\\n  useEffect(setup, []);\\n  return (\\n    <>\\n      <div id=\\"viewDiv\\"></div>\\n    </>\\n  );\\n};\\n```\\n\\n## \u74b0\u5883\\n\\n| \u9805\u76ee                      | \u5185\u5bb9   |\\n| ------------------------- | ------ |\\n| React                     | 18.2.0 |\\n| ArcGIS API for JavaScript | 4.24.7 |\\n| TypeScript                | 4.8.4  |\\n| webpack                   | 5.74.0 |\\n\\n## \u52d5\u7684\u306a\u914d\u7f6e\\n\\n`MapView`\u304c\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u5316\u3055\u308c\u305f\u3068\u304d\u306b`container`\u306b\u6307\u5b9a\u3057\u305f\u969b\u3001\u3053\u306e\u6642\u70b9\u3067\u8a72\u5f53\u306e HTML \u8981\u7d20\u304c\u306a\u3044\u5834\u5408\u306f\u5730\u56f3\u304c\u8868\u793a\u3055\u308c\u306a\u3044\u3002\\n\\nReact \u3092\u5229\u7528\u3057\u3066\u3044\u308b\u5834\u5408\u3001\u30b3\u30f3\u30dd\u30fc\u30cd\u30f3\u30c8\u304c\u30de\u30a6\u30f3\u30c8\u3055\u308c\u305f\u30bf\u30a4\u30df\u30f3\u30b0\u3067\u63cf\u753b\u3055\u308c\u308b\u3088\u3046\u306b\u3001`useEffect`\u5185\u3067`MapView`\u3092\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u5316\u3059\u308c\u3070\u554f\u984c\u306a\u304f\u8868\u793a\u304c\u3067\u304d\u308b\u3002\\n\\n## `container`\u30d7\u30ed\u30d1\u30c6\u30a3\\n\\n\u30b5\u30f3\u30d7\u30eb\u30b3\u30fc\u30c9\u306a\u3069\u3067\u306f\u4e0b\u8a18\u306e\u3088\u3046\u306b\u30b3\u30f3\u30b9\u30c8\u30e9\u30af\u30bf\u3067`container`\u306b HTML \u8981\u7d20\u306e`id`\u6587\u5b57\u5217\u3092\u6307\u5b9a\u3059\u308b\u3053\u3068\u304c\u591a\u3044\u3002\\n\\n```typescript\\nconst mapView = new MapView({\\n  // (\u7565)\\n  container: \\"viewDiv\\",\\n});\\n```\\n\\n\u3053\u306e\u3068\u304d\u3001`container`\u30d7\u30ed\u30d1\u30c6\u30a3\u306e\u578b\u306f `string | HTMLDivElement`\u3068\u306a\u3063\u3066\u3044\u308b\u305f\u3081\u3001TypeScript \u306e\u578b\u30a8\u30e9\u30fc\u306f\u51fa\u306a\u3044\u3002\\n\\n(\u30d2\u30f3\u30c8\u306b\u306f`__esri.DOMContainerProperties.container?: string | HTMLDivElement`\u3068\u3067\u308b\u304c\u3001\u8a72\u5f53\u306e\u578b\u306f\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u306b\u306f\u898b\u3064\u304b\u3089\u306a\u304b\u3063\u305f)\\n\\n[MapView | API Reference | ArcGIS API for JavaScript 4.24 | ArcGIS Developers - (developers.arcgis.com)](https://developers.arcgis.com/javascript/latest/api-reference/esri-views-MapView.html#container)\\n\\n\u4e00\u65b9\u3001`MapView`\u304c\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u5316\u3055\u308c\u305f\u5834\u5408\u3001`container`\u30d7\u30ed\u30d1\u30c6\u30a3\u306f`DOMContainer.container`\u3092\u6307\u3057\u3066\u3057\u307e\u3044\u3001\u6307\u5b9a\u3067\u304d\u308b\u306e\u306f`HTMLDivElement`\u306e\u307f\u3068\u306a\u308b\u3002\\n\\n[DOMContainer | API Reference | ArcGIS API for JavaScript 4.24 | ArcGIS Developers - (developers.arcgis.com)](https://developers.arcgis.com/javascript/latest/api-reference/esri-views-DOMContainer.html#container)\\n\\n\u305d\u306e\u305f\u3081\u4e0b\u8a18\u30b3\u30fc\u30c9\u3067\u306f\u578b\u30a8\u30e9\u30fc\u304c\u767a\u751f\u3057\u3066\u3057\u307e\u3046\u3002\\n\\n```typescript\\nconst mapView = new MapView(...);\\nmapView.container = \\"viewDiv\\"\\n```\\n\\n> Type \'string\' is not assignable to type \'HTMLDivElement\'.ts(2322)\\n\\n`MapView`\u3067\u306f\u306a\u304f\u3001\u3053\u308c\u304c\u7d99\u627f\u3057\u3066\u3044\u308b`__esri.Accessor`\u304c`set`\u30e1\u30bd\u30c3\u30c9\u3092\u6301\u3063\u3066\u304a\u308a\u3001\u3053\u308c\u3092\u5229\u7528\u3059\u308b\u3053\u3068\u3067\u52d5\u7684\u306b`container`\u3092\u6307\u5b9a\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u305f\u3002\\n\\n[Accessor | API Reference | ArcGIS API for JavaScript 4.24 | ArcGIS Developers - (developers.arcgis.com)](https://developers.arcgis.com/javascript/latest/api-reference/esri-core-Accessor.html#set)"},{"id":"/2022/10/16/dnd-behavior-on-wayland","metadata":{"permalink":"/2022/10/16/dnd-behavior-on-wayland","source":"@site/blog/2022-10-16-dnd-behavior-on-wayland.md","title":"\u3010JavaScript\u3011Wayland + Chromium\u74b0\u5883\u3067\u30d5\u30a1\u30a4\u30eb\u306e\u30d5\u30a1\u30a4\u30eb\u30c9\u30ed\u30c3\u30d7\u304c\u305f\u307e\u306b\u5931\u6557\u3059\u308b","description":"\u6982\u8981","date":"2022-10-16T00:00:00.000Z","formattedDate":"2022\u5e7410\u670816\u65e5","tags":[{"label":"javascript","permalink":"/tags/javascript"},{"label":"linux","permalink":"/tags/linux"}],"readingTime":3.155,"hasTruncateMarker":false,"authors":[{"name":"ogumaru","title":"ogumaru note owner","url":"https://github.com/ogumaru","imageURL":"https://github.com/ogumaru.png","key":"ogumaru"}],"frontMatter":{"title":"\u3010JavaScript\u3011Wayland + Chromium\u74b0\u5883\u3067\u30d5\u30a1\u30a4\u30eb\u306e\u30d5\u30a1\u30a4\u30eb\u30c9\u30ed\u30c3\u30d7\u304c\u305f\u307e\u306b\u5931\u6557\u3059\u308b","authors":"ogumaru","tags":["javascript","linux"]},"prevItem":{"title":"\u3010JavaScript\u3011ArcGIS\u3067\u52d5\u7684\u306bMapView\u3092\u914d\u7f6e\u3059\u308b","permalink":"/2022/10/20/arcgis-set-dynamically"},"nextItem":{"title":"\u3010Linux\u3011Ubuntu Pro beta\u3092\u5229\u7528\u3057\u3066\u307f\u308b","permalink":"/2022/10/06/get-started-ubuntu-pro"}},"content":"## \u6982\u8981\\n\\n\u30a6\u30a7\u30d6\u30d6\u30e9\u30a6\u30b6\u306e File API \u3092\u5229\u7528\u3057\u3066\u3001\u30d5\u30a1\u30a4\u30eb\u306e\u30c9\u30e9\u30c3\u30b0 & \u30c9\u30ed\u30c3\u30d7\u3092\u5229\u7528\u3057\u305f\u6a5f\u80fd\u3092\u5b9f\u88c5\u3057\u3066\u3044\u308b\u969b\u3001\u30d5\u30a1\u30a4\u30eb\u306e\u691c\u8a3c\u3092\u884c\u3063\u3066\u3044\u308b\u306b\u3082\u304b\u304b\u308f\u3089\u305a\u3001\u30a8\u30e9\u30fc\u304c\u767a\u751f\u3057\u305f\u3002\\n\\n\u5fc5\u305a\u5931\u6557\u3059\u308b\u308f\u3051\u3067\u306f\u306a\u304f\u3001\u305f\u307e\u306b\u6210\u529f\u3059\u308b\u305f\u3081\u3001\u52d5\u4f5c\u306e\u78ba\u8a8d\u3092\u884c\u3063\u305f\u3002\\n\\n## \u539f\u56e0\\n\\n\u30d5\u30a1\u30a4\u30eb\u30c9\u30ed\u30c3\u30d7\u6642\u306b\u305d\u306e\u4e2d\u8eab\u304c\u5909\u308f\u308b\u306e\u306f\u3001Wayland \u74b0\u5883\u306b\u304a\u3051\u308b\u73fe\u72b6\u306e\u6319\u52d5\u3089\u3057\u304b\u3063\u305f\u3002\\n\\n\u53c2\u7167:\\n\\n- [Cannot drag and drop from nautilus to Chrome or Slack - Ask Ubuntu (askubuntu.com)](https://askubuntu.com/questions/1411629/cannot-drag-and-drop-from-nautilus-to-chrome-or-slack)\\n- [Bug #1970921 \u201cDrag and drop does not work\u201d : Bugs : nautilus package : Ubuntu (bugs.launchpad.net)](https://bugs.launchpad.net/ubuntu/+source/nautilus/+bug/1970921)\\n\\n## \u6319\u52d5\u306e\u78ba\u8a8d\\n\\n### \u74b0\u5883\\n\\n| \u74b0\u5883     | \u30d0\u30fc\u30b8\u30e7\u30f3                   |\\n| -------- | ---------------------------- |\\n| OS       | Ubuntu 22.04.1 LTS           |\\n| Chromiun | Chromium 106.0.5249.119 snap |\\n| Firefox  | Mozilla Firefox 105.0.3      |\\n| Files    | GNOME nautilus 42.2          |\\n\\n### \u6319\u52d5\u306e\u8a73\u7d30\u3068\u78ba\u8a8d\\n\\n\u30c7\u30d0\u30c3\u30ac\u3092\u5229\u7528\u3057\u3066\u78ba\u8a8d\u3092\u884c\u3063\u305f\u3002\\n\\n\u4e0b\u8a18\u306e\u3088\u3046\u306a\u30b3\u30fc\u30c9\u306b\u304a\u3044\u3066\u3001`csv.getAsFile()`\u304c`null`\u306b\u306a\u308b\u305f\u3081\u306b\u4f8b\u5916\u304c\u767a\u751f\u3057\u3066\u3044\u305f\u3002\\n\\n\u4f53\u611f\u3068\u3057\u3066\u5931\u6557\u3059\u308b\u5272\u5408\u306e\u307b\u3046\u304c\u591a\u3044\u3088\u3046\u306b\u611f\u3058\u308b\u3002\\n\\n<details>\\n<summary>\u518d\u73fe\u30b3\u30fc\u30c9</summary>\\n\\n```javascript\\n// CSV\u5f62\u5f0f\u304b\u3069\u3046\u304b\u306e\u78ba\u8a8d\\nconst isCSVItem = (item) => {\\n  const type = item.type;\\n  const isCSV = [\\n    type === \\"text/plain\\",\\n    type === \\"text/csv\\",\\n    type === \\"application/vnd.ms-excel\\",\\n    type === \\"application/octet-stream\\",\\n  ].some((result) => result === true);\\n  return isCSV;\\n};\\n\\ndocument.body.addEventListener(\\"dragover\\", (event) => {\\n  event.stopPropagation();\\n  event.preventDefault();\\n  if (!event.dataTransfer) return;\\n  event.dataTransfer.dropEffect = \\"copy\\";\\n});\\n\\ndocument.body.addEventListener(\\"drop\\", (event) => {\\n  event.stopPropagation();\\n  event.preventDefault();\\n  if (!event.dataTransfer) return;\\n\\n  // item \u306e\u78ba\u8a8d\\n  // \u540c\u3058\u64cd\u4f5c\u3067\u3082\u7570\u306a\u308b\u7d50\u679c\u306b\u306a\u308b\\n  for (const item of event.dataTransfer.items) {\\n    console.log(item);\\n  }\\n\\n  Array.from(event.dataTransfer.items)\\n    .filter((item) => isCSVItem(item))\\n    // \u3053\u3053\u3067\u8fd4\u308a\u5024\u304c null \u306b\u306a\u308b\\n    .map((csv) => csv.getAsFile())\\n    .map((file) => {\\n      if (!file) throw new Error(\\"Failed to load csv file.\\");\\n      const reader = new FileReader();\\n      // file \u304c \u305f\u307e\u306b null \u306b\u306a\u308b\u305f\u3081\u4f8b\u5916\u304c\u767a\u751f\u3059\u308b\\n      reader.readAsDataURL(file);\\n      reader.addEventListener(\\"load\\", (event) => {\\n        // \u30d5\u30a1\u30a4\u30eb\u306b\u5bfe\u3059\u308b\u51e6\u7406\\n      });\\n    });\\n});\\n```\\n\\n</details>\\n\\n\u6210\u529f\u3059\u308b\u5834\u5408\u3068\u5931\u6557\u3059\u308b\u5834\u5408\u3092\u6bd4\u8f03\u3059\u308b\u3068\u3001\u4e0a\u8a18\u30b3\u30fc\u30c9\u306e`event.dataTransfer.items`\u306e\u8981\u7d20(`DataTransferItem`)\u306e\u4e2d\u8eab\u306b\u9055\u3044\u304c\u3042\u308a\u3001\u4e0b\u8a18 2 \u901a\u308a\u306b\u306a\u3063\u3066\u3044\u308b\u3053\u3068\u304c\u308f\u304b\u3063\u305f\u3002\\n\\n| \u51e6\u7406 | kind   | type       |\\n| ---- | ------ | ---------- |\\n| \u6210\u529f | file   | text/csv   |\\n| \u5931\u6557 | string | text/plain |\\n\\nFirefox \u3067\u306f\u3053\u306e\u554f\u984c\u306f\u767a\u751f\u305b\u305a\u3001`kind: file`\u306a\u3082\u306e\u304c\u53d6\u5f97\u3067\u304d\u308b\u305f\u3081\u554f\u984c\u306a\u304f\u52d5\u4f5c\u3057\u305f\u3002\\n\\n## \u5bfe\u7b56\\n\\n1. \u30c9\u30ed\u30c3\u30d7\u3055\u308c\u305f\u30c7\u30fc\u30bf\u306e`kind`\u304c`file`\u304b\u3069\u3046\u304b\u5224\u5b9a\u3059\u308b\\n1. `input`\u8981\u7d20\u304b\u3089\u30d5\u30a1\u30a4\u30eb\u3092\u9078\u629e\u3057\u3066\u53d6\u5f97\u3059\u308b  \\n   `input[type=\\"file\\"]`\u3067\u306f\u3053\u306e\u554f\u984c\u306f\u767a\u751f\u3057\u306a\u3044\\n1. \u30ed\u30b0\u30a4\u30f3\u6642\u306b [Ubuntu on Xorg] \u3092\u5229\u7528\u3059\u308b\\n\\n\u4eca\u56de\u306f 1, 2 \u306e\u5bfe\u7b56\u3092\u884c\u3063\u3066\u5b9f\u88c5\u3092\u884c\u3063\u305f\u3002"},{"id":"/2022/10/06/get-started-ubuntu-pro","metadata":{"permalink":"/2022/10/06/get-started-ubuntu-pro","source":"@site/blog/2022-10-06-get-started-ubuntu-pro/index.md","title":"\u3010Linux\u3011Ubuntu Pro beta\u3092\u5229\u7528\u3057\u3066\u307f\u308b","description":"\u6982\u8981","date":"2022-10-06T00:00:00.000Z","formattedDate":"2022\u5e7410\u67086\u65e5","tags":[{"label":"ubuntu","permalink":"/tags/ubuntu"},{"label":"linux","permalink":"/tags/linux"}],"readingTime":6.05,"hasTruncateMarker":false,"authors":[{"name":"ogumaru","title":"ogumaru note owner","url":"https://github.com/ogumaru","imageURL":"https://github.com/ogumaru.png","key":"ogumaru"}],"frontMatter":{"title":"\u3010Linux\u3011Ubuntu Pro beta\u3092\u5229\u7528\u3057\u3066\u307f\u308b","authors":"ogumaru","tags":["ubuntu","linux"]},"prevItem":{"title":"\u3010JavaScript\u3011Wayland + Chromium\u74b0\u5883\u3067\u30d5\u30a1\u30a4\u30eb\u306e\u30d5\u30a1\u30a4\u30eb\u30c9\u30ed\u30c3\u30d7\u304c\u305f\u307e\u306b\u5931\u6557\u3059\u308b","permalink":"/2022/10/16/dnd-behavior-on-wayland"},"nextItem":{"title":"\u3010Linux\u3011Ubuntu 22.04\u3067Wi-Fi\u30c9\u30f3\u30b0\u30eb\u306e\u30c9\u30e9\u30a4\u30d0\u3092Docker\u3067\u30d3\u30eb\u30c9\u3059\u308b","permalink":"/2022/10/01/build-wifi-dongle-driver"}},"content":"## \u6982\u8981\\n\\n\u307e\u305f beta \u304c\u3064\u3044\u3066\u3044\u308b\u304c\u3001Ubuntu Pro \u304c[\u500b\u4eba\u3067\u3082 5 \u53f0\u307e\u3067\u7121\u511f\u5229\u7528\u3067\u304d\u308b\u3088\u3046\u306b\u306a\u3063\u305f](https://ubuntu.com/blog/ubuntu-pro-beta-release)\u305f\u3081\u3001\u65e9\u901f\u5229\u7528\u3057\u3066\u307f\u308b\u3002\\n\\n\u5168\u4f53\u306e\u6d41\u308c\u3068\u3057\u3066\u306f\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u306a\u308b\u3002\\n\\n1. [Ubuntu One](https://login.ubuntu.com/)\u306e\u30a2\u30ab\u30a6\u30f3\u30c8\u306e\u4f5c\u6210\\n1. [Ubuntu Pro](https://ubuntu.com/pro)\u3078\u30ed\u30b0\u30a4\u30f3\\n1. \u30c8\u30fc\u30af\u30f3\u306e\u53d6\u5f97\\n1. `pro`\u30b3\u30de\u30f3\u30c9\u3092\u5229\u7528\u3067\u304d\u308b\u3088\u3046\u306b\u3059\u308b\\n1. \u7aef\u672b\u3092\u30a2\u30bf\u30c3\u30c1\\n\\n[Ubuntu Pro beta tutorial](https://discourse.ubuntu.com/t/ubuntu-pro-beta-tutorial/31018)\u3092\u53c2\u8003\u306b\u9032\u3081\u308c\u3070\u7279\u306b\u8a70\u307e\u308b\u3068\u3053\u308d\u3082\u306a\u3044\u3002\\n\\n## \u74b0\u5883\\n\\n| \u9805\u76ee | \u5185\u5bb9               |\\n| ---- | ------------------ |\\n| OS   | Ubuntu 22.04.1 LTS |\\n\\n## \u5229\u7528\u624b\u9806\\n\\n### Ubuntu One \u30a2\u30ab\u30a6\u30f3\u30c8\u306e\u4f5c\u6210 / Ubuntu Pro \u3078\u30ed\u30b0\u30a4\u30f3\\n\\nUbuntu One \u306e\u30a2\u30ab\u30a6\u30f3\u30c8\u3092\u4f5c\u6210\u3057\u305f\u3042\u3068\u3001Ubuntu Pro \u306e\u30da\u30fc\u30b8\u304b\u3089\u518d\u5ea6\u30ed\u30b0\u30a4\u30f3\u3092\u884c\u3046\u3068\u4e0b\u56f3\u306e\u753b\u9762\u306b\u306a\u308b\u3002\\n\\n![Personal Data Request](Personal_Data_Request.png \\"Personal Data Request\\")\\n\\n\u306a\u304a\u3001\u300cService authorization for Ubuntu.com\u300d\u306f\u30c1\u30a7\u30c3\u30af\u3092\u5165\u308c\u306a\u3044\u3068\u9032\u3081\u306a\u304b\u3063\u305f\u3002\\n\\n### \u30c8\u30fc\u30af\u30f3\u306e\u53d6\u5f97\\n\\nUbuntu Pro \u306b\u30ed\u30b0\u30a4\u30f3\u5f8c\u3001\u4e0b\u8a18\u306e\u753b\u9762\u304b\u3089\u300cUA subscriptions\u300d\u3092\u62bc\u4e0b\u3059\u308b\u3068\u30c8\u30fc\u30af\u30f3\u304c\u78ba\u8a8d\u3067\u304d\u308b\u3002\\n\\n![UA Subscriptions](UA_subscriptions.png \\"UA Subscriptions\\")\\n\\n`Token`\u3068\u3042\u308b\u7b87\u6240\u306b\u30c8\u30fc\u30af\u30f3\u3001\u305d\u306e\u4e0b\u306b\u306f\u30a2\u30bf\u30c3\u30c1\u306e\u969b\u306e\u30b3\u30de\u30f3\u30c9\u304c\u66f8\u3044\u3066\u3042\u308b\u3002\\n\\n![Your subscriptions](Your_subscriptions.png \\"Your subscriptions\\")\\n\\n### `pro`\u30b3\u30de\u30f3\u30c9\u3092\u5229\u7528\u3067\u304d\u308b\u3088\u3046\u306b\u3059\u308b\\n\\n\u8a73\u7d30\u306f\u5f8c\u8ff0\u3059\u308b\u304c\u3001`pro`\u30b3\u30de\u30f3\u30c9\u306e\u305f\u3081\u306b\u8ffd\u52a0\u3067\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u304c\u5fc5\u8981\u306b\u306f\u306a\u3089\u306a\u304b\u3063\u305f\u3002\\n\\n```bash\\nsudo apt update && sudo apt upgrade\\n```\\n\\n### \u7aef\u672b\u306e\u30a2\u30bf\u30c3\u30c1\\n\\n```bash\\nsudo pro attach \\"${\u8868\u793a\u3055\u308c\u3066\u3044\u308bTOKEN}\\"\\n# > Enabling default service esm-infra\\n# > Updating package lists\\n# > Ubuntu Pro: ESM Infra enabled\\n# > Enabling default service livepatch\\n# > Installing canonical-livepatch snap\\n# > Canonical livepatch enabled.\\n# > Unable to determine current instance-id\\n# > This machine is now attached to \'Ubuntu Pro - free personal subscription\'\\n# >\\n# > SERVICE          ENTITLED  STATUS    DESCRIPTION\\n# > esm-infra        yes       enabled   Expanded Security # > Maintenance for Infrastructure\\n# > livepatch        yes       enabled   Canonical Livepatch service\\n# >\\n# > NOTICES\\n# > Operation in progress: pro attach\\n# >\\n# > Enable services with: pro enable <service>\\n# >\\n# >      Account: ogumaru@example.com\\n# > Subscription: Ubuntu Pro - free personal subscription\\n```\\n\\n\u5b9f\u884c\u3082\u307b\u3068\u3093\u3069\u6642\u9593\u306f\u304b\u304b\u3089\u305a\u3001\u7279\u306b\u518d\u8d77\u52d5\u3092\u6c42\u3081\u3089\u308c\u308b\u3053\u3068\u306f\u306a\u304b\u3063\u305f\u3002\\n\\n\u4e0a\u8a18\u30b3\u30de\u30f3\u30c9\u3067\u30a2\u30bf\u30c3\u30c1\u5f8c\u306b\u306f\u30c8\u30c3\u30d7\u30d0\u30fc\u306b\u4e0b\u56f3\u306e\u5e38\u99d0\u30a2\u30a4\u30b3\u30f3\u304c\u8868\u793a\u3055\u308c\u308b\u3088\u3046\u306b\u306a\u308b\u3002\\n\\n![Livepatch\u306e\u30a2\u30a4\u30b3\u30f3](Livepatch.png \\"Livepatch\u306e\u30a2\u30a4\u30b3\u30f3\\")\\n\\n\u300cLivepatch Settings\u300d\u3092\u62bc\u4e0b\u3059\u308b\u3068\u30e9\u30a4\u30d6\u30d1\u30c3\u30c1\u306e\u8a2d\u5b9a\u306e\u307b\u304b\u3001\u30c8\u30c3\u30d7\u30d0\u30fc\u306e\u5e38\u99d0\u30a2\u30a4\u30b3\u30f3\u8868\u793a\u5207\u308a\u66ff\u3048\u3084\u7aef\u672b\u306e\u30c7\u30bf\u30c3\u30c1\u3082\u3067\u304d\u308b\u3002\\n\\n![Detach this machine](Detach_this_machine.png \\"Detach this machine\\")\\n\\n## \u30c8\u30fc\u30af\u30f3\u306b\u3064\u3044\u3066\\n\\n`Token`\u306f\u7aef\u672b\u8a8d\u8a3c\u5f8c\u3082\u5909\u308f\u3089\u305a(=5 \u53f0\u3068\u3082\u540c\u3058\u30c8\u30fc\u30af\u30f3\u3092\u5229\u7528\u3059\u308b\u306f\u305a)\u3001\u307e\u305f\u30c8\u30fc\u30af\u30f3\u306e\u66f4\u65b0\u753b\u9762\u3082\u898b\u3064\u304b\u3089\u306a\u304b\u3063\u305f\u3002\\n\\n\u30c8\u30fc\u30af\u30f3\u304c\u6f0f\u308c\u3066\u3057\u307e\u3063\u305f\u5834\u5408\u306e\u5bfe\u7b56\u306f\u6c17\u306b\u306a\u308b\u3002\\n\\n## `pro`\u30b3\u30de\u30f3\u30c9\u306e\u5b9f\u4f53\u306b\u3064\u3044\u3066\\n\\n### \u7d50\u8ad6\\n\\n`ubuntu-advantage`\u304c\u5b9f\u4f53\u3068\u306a\u3063\u3066\u3044\u308b\u3002\\n\\n### `pro`\u30b3\u30de\u30f3\u30c9\u306e\u6709\u7121\\n\\n\u3053\u308c\u307e\u3067\u306e\u74b0\u5883\u3067\u306f`pro`\u30b3\u30de\u30f3\u30c9\u306f\u5229\u7528\u3067\u304d\u306a\u304b\u3063\u305f\u3002\\n\\n```bash\\n# pro \u30b3\u30de\u30f3\u30c9\u306f\u5229\u7528\u3067\u304d\u306a\u3044\\ncommand -v pro\\n\\n# \u5b9f\u884c\u3057\u3066\u3082\u30d1\u30c3\u30b1\u30fc\u30b8\u306e\u5019\u88dc\u306b\u306f\u3067\u3066\u3053\u306a\u3044\\npro\\n# > Command \'pro\' not found, did you mean:\\n# >   command \'gpro\' from snap gpro (1.0.24)\\n# >   command \'ro\' from deb golang-redoctober (0.0~git20161017.0.78e9720-5)\\n# >   command \'proj\' from deb proj-bin (8.2.1-1)\\n# >   command \'prt\' from deb prt (0.22-1)\\n# >   command \'pio\' from deb platformio (4.3.4-2)\\n# >   command \'pr\' from deb coreutils (8.32-4.1ubuntu1)\\n# >   command \'pry\' from deb pry (0.13.1-2)\\n# > See \'snap info <snapname>\' for additional versions.\\n```\\n\\n`apt upgrade`\u3067\u30d1\u30c3\u30b1\u30fc\u30b8\u66f4\u65b0\u3092\u3057\u305f\u3042\u3068\u5229\u7528\u3067\u304d\u308b\u3088\u3046\u306b\u306a\u308b\u3002\\n\\n\u30d1\u30c3\u30b1\u30fc\u30b8\u3068\u3057\u3066\u306f`ubuntu-advantage-tools`\u306e\u4e00\u90e8\u306a\u3088\u3046\u3067\u3001\u3053\u308c\u304c\u30a2\u30c3\u30d7\u30c7\u30fc\u30c8\u3055\u308c\u308b\u3053\u3068\u3067`pro`\u304c\u5229\u7528\u3067\u304d\u308b\u3088\u3046\u306b\u306a\u308b\u3088\u3046\u3060\u3002\\n\\n```bash\\nsudo apt update && sudo apt upgrade\\n# > ...\\n# > The following packages will be upgraded:\\n# >   ubuntu-advantage-tools\\n# > 1 upgraded, 0 newly installed, 0 to remove and 0 not upgraded.\\n# > Need to get 163 kB of archives.\\n# > After this operation, 113 kB of additional disk space will be # used.\\n# > Do you want to continue? [Y/n] y\\n# > Get:1 http://jp.archive.ubuntu.com/ubuntu jammy-updates/main # amd64 ubuntu-advantage-tools amd64 27.11.2~22.04.1 [163 kB]\\n# > Fetched 163 kB in 0s (723 kB/s)\\n# > Preconfiguring packages ...\\n# > (Reading database ... 183922 files and directories currently installed.)\\n# > Preparing to unpack .../ubuntu-advantage-tools_27.11.2~22.04.1_amd64.deb ...\\n# > Unpacking ubuntu-advantage-tools (27.11.2~22.04.1) over (27.10.1~22.04.1) ...\\n# > Setting up ubuntu-advantage-tools (27.11.2~22.04.1) ...\\n# > Installing new version of config file /etc/ubuntu-advantage/help_data.yaml ...\\n# > Installing new version of config file /etc/ubuntu-advantage/uaclient.conf ...\\n# > Processing triggers for man-db (2.10.2-1) ...\\n```\\n\\n### \u5b9f\u4f53\u306e\u78ba\u8a8d\u3068\u95a2\u9023\u30b3\u30de\u30f3\u30c9\\n\\n`pro`\u30b3\u30de\u30f3\u30c9\u306e\u5b9f\u4f53\u3092\u78ba\u8a8d\u3059\u308b\u3068`ubuntu-advantage`\u3078\u306e\u30b7\u30f3\u30dc\u30ea\u30c3\u30af\u30ea\u30f3\u30af\u306b\u306a\u3063\u3066\u3044\u305f\u3002\\n\\n```bash\\ncommand -v pro\\n# > /usr/bin/pro\\n\\nfile \\"$(command -v pro)\\"\\n# > /usr/bin/pro: symbolic link to ubuntu-advantage\\n```\\n\\n\u307e\u305f\u3001[\u3053\u3053](https://ubuntu.com/security/certifications/docs/fips-enablement)\u306b\u8a18\u8f09\u3055\u308c\u3066\u3044\u308b\u3088\u3046\u306a`ua`\u30b3\u30de\u30f3\u30c9\u3082\u3001\u540c\u69d8\u306b`ubuntu-advantage`\u3078\u306e\u30b7\u30f3\u30dc\u30ea\u30c3\u30af\u30ea\u30f3\u30af\u3068\u306a\u3063\u3066\u3044\u305f\u3002\\n\\n```bash\\nfile \\"$(command -v ua )\\"\\n/usr/bin/ua: symbolic link to ubuntu-advantage\\n```\\n\\n[Ubuntu Pro Client](https://discourse.ubuntu.com/t/ubuntu-pro-client/31027)\u306b\u3082\u4e0b\u8a18\u306e\u8a18\u8f09\u304c\u3042\u308b\u3002\\n\\n> Note: The Ubuntu Advantage client or UA client has been renamed to the Ubuntu Pro client in line with the rebranding of Ubuntu Advantage to Ubuntu Pro 4. Specific commands have also been updated to refer to Ubuntu Pro rather than Ubuntu Advantage.\\n\\n`ubuntu-advantage`\u81ea\u4f53\u3092\u547c\u3073\u51fa\u3057\u3066\u3082\u3001\u30d8\u30eb\u30d7\u5185\u306f`pro`\u3068\u306a\u3063\u3066\u3044\u305f\u3002\\n\\n```bash\\nubuntu-advantage --help\\n# > usage: pro <command> [flags]\\n# > ...\\n```\\n\\n[\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u306e\u4fee\u6b63\u30b3\u30df\u30c3\u30c8(docs: ua -> pro)](https://github.com/canonical/ubuntu-advantage-client/commit/a92c75598787e33b1c15dee8d05289c49357670f)\u3067\u3082\u898b\u3089\u308c\u308b\u3088\u3046\u306b\u3001\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u3082`pro`\u3078\u66f4\u65b0\u3055\u308c\u3066\u3044\u308b\u3002"},{"id":"/2022/10/01/build-wifi-dongle-driver","metadata":{"permalink":"/2022/10/01/build-wifi-dongle-driver","source":"@site/blog/2022-10-01-build-wifi-dongle-driver.md","title":"\u3010Linux\u3011Ubuntu 22.04\u3067Wi-Fi\u30c9\u30f3\u30b0\u30eb\u306e\u30c9\u30e9\u30a4\u30d0\u3092Docker\u3067\u30d3\u30eb\u30c9\u3059\u308b","description":"\u6982\u8981","date":"2022-10-01T00:00:00.000Z","formattedDate":"2022\u5e7410\u67081\u65e5","tags":[{"label":"ubuntu","permalink":"/tags/ubuntu"},{"label":"linux","permalink":"/tags/linux"},{"label":"wifi","permalink":"/tags/wifi"}],"readingTime":5.97,"hasTruncateMarker":false,"authors":[{"name":"ogumaru","title":"ogumaru note owner","url":"https://github.com/ogumaru","imageURL":"https://github.com/ogumaru.png","key":"ogumaru"}],"frontMatter":{"title":"\u3010Linux\u3011Ubuntu 22.04\u3067Wi-Fi\u30c9\u30f3\u30b0\u30eb\u306e\u30c9\u30e9\u30a4\u30d0\u3092Docker\u3067\u30d3\u30eb\u30c9\u3059\u308b","authors":"ogumaru","tags":["ubuntu","linux","wifi"]},"prevItem":{"title":"\u3010Linux\u3011Ubuntu Pro beta\u3092\u5229\u7528\u3057\u3066\u307f\u308b","permalink":"/2022/10/06/get-started-ubuntu-pro"},"nextItem":{"title":"\u3010Linux\u3011Raspberry Pi 4\u306eSamba\u30b5\u30fc\u30d0\u3078iPhone\u306e\u7d14\u6b63\u30a2\u30d7\u30ea\u304b\u3089\u63a5\u7d9a\u3059\u308b","permalink":"/2022/09/10/samba-on-raspberrypi-from-ios"}},"content":"## \u6982\u8981\\n\\n\u3053\u308c\u307e\u3067 Wi-Fi \u63a5\u7d9a\u7528\u306e USB \u30c9\u30f3\u30b0\u30eb\u3092\u5229\u7528\u3059\u308b\u969b\u306b\u30c9\u30e9\u30a4\u30d0\u306e\u30d3\u30eb\u30c9\u304c\u5fc5\u8981\u306b\u306a\u308b\u3053\u3068\u304c\u3042\u3063\u305f\u305f\u3081\u3001\u4f5c\u696d\u306e\u8a18\u9332\u3082\u517c\u306d\u3066\u307e\u3068\u3081\u3066\u304a\u304f\u3002\\n\\n\u4f9d\u5b58\u30d1\u30c3\u30b1\u30fc\u30b8\u304c\u591a\u3044\u305f\u3081\u3001Docker \u3092\u5229\u7528\u3057\u3066\u30d3\u30eb\u30c9\u3092\u884c\u3046\u3053\u3068\u3068\u3059\u308b\u3002\\n\\n## \u74b0\u5883\u30fb\u5229\u7528\u6a5f\u5668\\n\\n| \u74b0\u5883   | \u30d0\u30fc\u30b8\u30e7\u30f3              |\\n| ------ | ----------------------- |\\n| OS     | Ubuntu 22.04.1 LTS      |\\n| Docker | 20.10.14, build a224086 |\\n\\n| \u88fd\u54c1                                                                              | \u30b3\u30f3\u30c8\u30ed\u30fc\u30e9                                                                               |\\n| --------------------------------------------------------------------------------- | ------------------------------------------------------------------------------------------ |\\n| [\u30a2\u30a4\u30fb\u30aa\u30fc\u30fb\u30c7\u30fc\u30bf\u793e WNPU583B](https://www.amazon.co.jp/gp/product/B01N44FMI9/)  | [rtl8821ce](https://www.realtek.com/ja/products/communications-network-ics/item/rtl8821ce) |\\n| [\u30a2\u30a4\u30fb\u30aa\u30fc\u30fb\u30c7\u30fc\u30bf\u793e WN-AC867U](https://www.amazon.co.jp/gp/product/B00C58G612/) | [rtl8812au](https://www.realtek.com/ja/products/communications-network-ics/item/rtl8812au) |\\n\\nWNPU583B \u306f Wi-Fi/Bluetooth \u4e21\u65b9\u4f7f\u7528\u3067\u304d\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3059\u308b\u3002\\n\\n## \u30c9\u30e9\u30a4\u30d0\u306e\u30d3\u30eb\u30c9\u30fb\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\\n\\n### Docker \u30b3\u30f3\u30c6\u30ca\u306e\u8d77\u52d5 (\u30db\u30b9\u30c8\u5074)\\n\\nrtl8812au \u306e\u30c9\u30e9\u30a4\u30d0\u304c\u591a\u304f\u8ff7\u3046\u304c\u3001[GitHub \u3067\u306e\u300crtl8812au\u300d\u306e\u691c\u7d22\u7d50\u679c](https://github.com/search?q=rtl8812au)\u306e\u4e0a\u4f4d\u306e\u3082\u306e\u3092\u5229\u7528\u3057\u305f\u3002\\n\\n```bash\\ngit clone https://github.com/gnab/rtl8812au.git driver\\ndocker run --rm -it -v \\"$(pwd)/driver:/data\\" -w \\"/data\\" ubuntu:jammy /bin/bash\\n```\\n\\n\u5f8c\u8ff0\u3059\u308b\u30ab\u30fc\u30cd\u30eb\u30d8\u30c3\u30c0\u306e\u30d1\u30c3\u30b1\u30fc\u30b8\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3059\u308b\u305f\u3081\u306b\u306f\u3001\u30db\u30b9\u30c8\u3068\u30b3\u30f3\u30c6\u30ca\u306e OS(\u30c7\u30a3\u30b9\u30c8\u30ea\u30d3\u30e5\u30fc\u30b7\u30e7\u30f3)\u3092\u5408\u308f\u305b\u308b\u5fc5\u8981\u304c\u3042\u308b\u3002\\n\\n\u6700\u521d`gcc`\u306e\u30b3\u30f3\u30c6\u30ca\u3067\u30d3\u30eb\u30c9\u3057\u3088\u3046\u3068\u3057\u305f\u304c\u3001\u30d9\u30fc\u30b9\u3068\u306a\u308b OS \u304c\u7570\u306a\u308b\u305f\u3081\u3053\u306e\u30d1\u30c3\u30b1\u30fc\u30b8\u304c\u306a\u304b\u3063\u305f\u3002\\n\\n### \u4f9d\u5b58\u30d1\u30c3\u30b1\u30fc\u30b8\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb (\u30b3\u30f3\u30c6\u30ca\u5074)\\n\\n```bash\\napt update\\napt install build-essential \\"linux-headers-$(uname -r)\\"\\n```\\n\\n\u306a\u304a\u3001`linux-headers-*`\u306e\u30d1\u30c3\u30b1\u30fc\u30b8\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u306a\u3044\u3068\u4e0b\u8a18\u306e\u30a8\u30e9\u30fc\u304c\u51fa\u308b\u3002\\n\\n> make[1]: \\\\*\\\\*\\\\* /lib/modules/5.15.0-47-generic/build: No such file or directory.\\n\\n### \u30c9\u30e9\u30a4\u30d0\u306e\u30d3\u30eb\u30c9 (\u30b3\u30f3\u30c6\u30ca\u5074)\\n\\n```bash\\nmake\\n```\\n\\n### \u30c9\u30e9\u30a4\u30d0\u306e\u30c6\u30b9\u30c8 (\u30db\u30b9\u30c8\u5074)\\n\\n```bash\\nsudo insmod driver/8812au.ko\\n```\\n\\n\u3053\u306e\u72b6\u614b\u3067\u306f\u518d\u8d77\u52d5\u306e\u969b\u306b\u30e2\u30b8\u30e5\u30fc\u30eb\u3078\u306e\u53c2\u7167\u304c\u89e3\u9664\u3055\u308c\u3066\u3057\u307e\u3046\u3002\\n\\n### \u30a4\u30f3\u30b9\u30c8\u30fc\u30eb (\u30db\u30b9\u30c8\u5074)\\n\\n```bash\\nsudo cp 8812au.ko \\"/lib/modules/$(uname -r)/kernel/drivers/net/wireless\\"\\nsudo depmod\\n```\\n\\n\u4e0a\u8a18\u306e\u307b\u304b\u3001\u30ab\u30fc\u30cd\u30eb\u30a2\u30c3\u30d7\u30c7\u30fc\u30c8\u3092\u3057\u305f\u969b\u306b\u81ea\u52d5\u3067\u30d3\u30eb\u30c9\u3059\u308b\u306b\u306f DKMS \u3092\u5229\u7528\u3059\u308b\u5fc5\u8981\u304c\u3042\u308b\u3002\\n\\n\u8a73\u7d30\u306f[\u30ea\u30dd\u30b8\u30c8\u30ea\u306e README](https://github.com/gnab/rtl8812au/)\u306b\u66f8\u3044\u3066\u3042\u308b\u3002\\n\\n`build-essential`\u3084`dkms`\u306a\u3069\u306e\u30d1\u30c3\u30b1\u30fc\u30b8\u3092\u5165\u308c\u308b\u5fc5\u8981\u304c\u3042\u308b\u305f\u3081\u3001\u4eca\u56de\u306f\u5bfe\u5fdc\u3057\u306a\u3044\u3053\u3068\u3068\u3059\u308b\u3002\\n\\n(\u5225\u306e\u6a5f\u4f1a\u306b Docker \u3092\u5229\u7528\u3057\u305f\u65b9\u6cd5\u3092\u8a66\u3057\u305f\u3044\u3002)\\n\\n## \u30bd\u30fc\u30b9\u30b3\u30fc\u30c9\u306e\u78ba\u8a8d\\n\\n\u3053\u3053\u307e\u3067\u3067\u30c9\u30f3\u30b0\u30eb\u306f\u52d5\u4f5c\u3059\u308b\u72b6\u614b\u306b\u306f\u306a\u3063\u305f\u304c\u3001\u88fd\u54c1\u3078\u306e\u5bfe\u5fdc\u72b6\u6cc1\u3092\u78ba\u8a8d\u3059\u308b\u305f\u3081\u3001\u4eca\u56de\u5229\u7528\u3057\u305f\u30ea\u30dd\u30b8\u30c8\u30ea\u3068 APT \u30ea\u30dd\u30b8\u30c8\u30ea\u306e\u30bd\u30fc\u30b9\u30b3\u30fc\u30c9\u3092\u6bd4\u8f03\u3057\u3064\u3064\u78ba\u8a8d\u3057\u3066\u307f\u308b\u3002\\n\\n### \u30d9\u30f3\u30c0\u30fc ID\u30fb\u30d7\u30ed\u30c0\u30af\u30c8 ID \u306e\u78ba\u8a8d\\n\\n\u30bd\u30fc\u30b9\u30b3\u30fc\u30c9\u3092\u63a2\u308b\u306b\u3042\u305f\u308a\u3001\u88fd\u54c1\u306e ID \u3092\u78ba\u8a8d\u3059\u308b\u3002\\n\\n```bash\\nlsusb | grep -i wn\\n# > Bus 001 Device 013: ID 0bda:0823 Realtek Semiconductor Corp. WNPU583B\\n# > Bus 001 Device 012: ID 04bb:0952 I-O Data Device, Inc. WN-AC867U\\n```\\n\\n`0bda:0823`\u3084`04bb:0952`\u304c\u30d9\u30f3\u30c0\u30fc ID(`idVendor`)\u3068\u30d7\u30ed\u30c0\u30af\u30c8 ID(`idProduct`)\u306e\u5024\u306e\u305f\u3081\u3001\u3053\u308c\u3092\u5229\u7528\u3057\u3066\u30bd\u30fc\u30b9\u30b3\u30fc\u30c9\u3092\u691c\u7d22\u3059\u308b\u3002\\n\u30d9\u30f3\u30c0\u30fc ID \u3092\u542b\u3081\u308b\u3068\u30d2\u30c3\u30c8\u4ef6\u6570\u304c\u591a\u3044\u305f\u3081\u3001\u30d7\u30ed\u30c0\u30af\u30c8 ID \u3092\u5229\u7528\u3057\u3066\u691c\u7d22\u3092\u884c\u3046\u3002\\n\\n### \u4eca\u56de\u5229\u7528\u3057\u305f\u30ea\u30dd\u30b8\u30c8\u30ea\u306e\u30bd\u30fc\u30b9\u30b3\u30fc\u30c9\\n\\n[https://github.com/gnab/rtl8812au.git](https://github.com/gnab/rtl8812au.git)\u306e\u30bd\u30fc\u30b9\u30b3\u30fc\u30c9\u5185\u304b\u3089\u95a2\u9023\u3059\u308b\u8a18\u8ff0\u3092\u78ba\u8a8d\u3059\u308b\u3002\\n\\n```bash\\ngit grep -iP \'0x(0823|0952)\'\\n# > os_dep/linux/usb_intf.c:        {USB_DEVICE(0x04BB, 0x0952),.driver_info = RTL8812}, /* I-O DATA - Edimax */\\n# > os_dep/linux/usb_intf.c:        {USB_DEVICE(0x0bda, 0x0823),.driver_info = RTL8821}, /* I-O DATA - WNPU583B */\\n```\\n\\n### APT \u30ea\u30dd\u30b8\u30c8\u30ea\u306e\u30bd\u30fc\u30b9\u30b3\u30fc\u30c9\\n\\n\u30db\u30b9\u30c8\u74b0\u5883\u306e\u8a2d\u5b9a\u3092\u5909\u3048\u305f\u304f\u306a\u304b\u3063\u305f\u306e\u3067\u30b3\u30f3\u30c6\u30ca\u74b0\u5883\u3067\u30bd\u30fc\u30b9\u30b3\u30fc\u30c9\u3092\u53d6\u5f97\u3059\u308b\\n\\n```bash\\n# \u4f55\u304b\u3057\u3089\u30a8\u30c7\u30a3\u30bf\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\\napt install busybox\\n\\n# deb-src \u306e\u30b3\u30e1\u30f3\u30c8\u30a2\u30a6\u30c8\u3092\u89e3\u9664\u3059\u308b\\nbusybox vi /etc/apt/sources.list\\napt update\\n\\n# \u95a2\u9023\u3059\u308b\u30d1\u30c3\u30b1\u30fc\u30b8\u3092\u691c\u7d22\\napt search --names-only \'rtl88[21]{2}\'\\n# > Sorting... Done\\n# > Full Text Search... Done\\n# > rtl8812au-dkms/jammy,jammy 4.3.8.12175.20140902+dfsg-0ubuntu15 all\\n# >   dkms source for the r8812au network driver\\n# >\\n# > rtl8821ce-dkms/jammy,jammy 5.5.2.1-0ubuntu10 all\\n# >   DKMS source for the Realtek 8821C PCIe Wi-Fi driver\\n```\\n\\n\u4e0a\u8a18\u306e\u30d1\u30c3\u30b1\u30fc\u30b8\u691c\u7d22\u7d50\u679c\u304b\u3089`rtl8812au-dkms`\u3068`rtl8821ce-dkms`\u3092\u78ba\u8a8d\u3059\u308b\u3053\u3068\u306b\u3059\u308b\u3002\\n\\n```bash\\n# \u30bd\u30fc\u30b9\u30b3\u30fc\u30c9\u306e\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\\napt source rtl8812au-dkms\\n```\\n\\n\u4e0b\u8a18\u306e\u30e1\u30c3\u30bb\u30fc\u30b8\u304c\u51fa\u3066\u304d\u305f\u304c\u3001\u4eca\u56de\u306f`apt source`\u3067\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u3057\u305f\u3082\u306e\u3092\u78ba\u8a8d\u3059\u308b\u3002\\n\\n> Picking \'rtl8812au\' as source package instead of \'rtl8812au-dkms\'  \\n> NOTICE: \'rtl8812au\' packaging is maintained in the \'Git\' version control system at:  \\n> https://github.com/rsalveti/rtl8812au.git  \\n> Please use:  \\n> git clone https://github.com/rsalveti/rtl8812au.git  \\n> to retrieve the latest (possibly unreleased) updates to the package.\\n\\n```bash\\napt source rtl8821ce-dkms\\n```\\n\\n\u4e0b\u8a18\u306e\u30e1\u30c3\u30bb\u30fc\u30b8\u304c\u51fa\u3066\u304d\u305f\u304c\u3001\u3053\u3061\u3089\u3082`apt source`\u3067\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u3057\u305f\u3082\u306e\u3092\u78ba\u8a8d\u3059\u308b\u3002\\n\\n> Picking \'rtl8821ce\' as source package instead of \'rtl8821ce-dkms\'  \\n> NOTICE: \'rtl8821ce\' packaging is maintained in the \'Git\' version control system at:  \\n> https://git.launchpad.net/~canonical-hwe-team/ubuntu/+source/rtl8821ce-dkms/+git/rtl8821ce-dkms  \\n> Please use:  \\n> git clone https://git.launchpad.net/~canonical-hwe-team/ubuntu/+source/rtl8821ce-dkms/+git/rtl8821ce-dkms  \\n> to retrieve the latest (possibly unreleased) updates to the package.\\n\\n\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u3057\u305f\u30bd\u30fc\u30b9\u30b3\u30fc\u30c9\u304b\u3089\u95a2\u9023\u3059\u308b\u8a18\u8ff0\u3092\u691c\u7d22\u3059\u308b\u3002\\n\\n```bash\\n# \u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u3055\u308c\u305f\u30d5\u30a1\u30a4\u30eb\u306e\u78ba\u8a8d\\nls -1\\n# > rtl8812au-4.3.8.12175.20140902+dfsg\\n# > rtl8812au_4.3.8.12175.20140902+dfsg-0ubuntu15.debian.tar.xz\\n# > rtl8812au_4.3.8.12175.20140902+dfsg-0ubuntu15.dsc\\n# > rtl8812au_4.3.8.12175.20140902+dfsg.orig.tar.gz\\n# > rtl8821ce-5.5.2.1\\n# > rtl8821ce_5.5.2.1-0ubuntu10.debian.tar.xz\\n# > rtl8821ce_5.5.2.1-0ubuntu10.dsc\\n# > rtl8821ce_5.5.2.1.orig.tar.gz\\n\\n# \u95a2\u9023\u3059\u308b\u8a18\u8ff0\u3092\u78ba\u8a8d\\nfind -name \\"*.c\\" -print0 | xargs -0 grep -iP \'0x(0823|0952)\'\\n# > ./rtl8812au-4.3.8.12175.20140902+dfsg/.pc/0009-usb_intf-extending-compatible-vendor-list.patch/os_dep/linux/usb_intf.c:\\t{USB_DEVICE(0x04BB, 0x0952),.driver_info = RTL8812}, /* I-O DATA - Edimax */\\n# > ./rtl8812au-4.3.8.12175.20140902+dfsg/.pc/0004-Adding-additional-compatible-devices.patch/os_dep/linux/usb_intf.c:\\t{USB_DEVICE(0x04BB, 0x0952),.driver_info = RTL8812}, /* I-O DATA - Edimax */\\n# > ./rtl8812au-4.3.8.12175.20140902+dfsg/os_dep/linux/usb_intf.c:\\t{USB_DEVICE(0x04BB, 0x0952),.driver_info = RTL8812}, /* I-O DATA - Edimax *\\n```\\n\\n\u4f9d\u5b58\u30d1\u30c3\u30b1\u30fc\u30b8\u304c\u591a\u304f\u5165\u308c\u305f\u304f\u306a\u3044\u305f\u3081\u78ba\u8a8d\u3057\u3066\u3044\u306a\u3044\u304c\u3001\u4e0a\u8a18\u304b\u3089\u306e\u4e88\u60f3\u3068\u3057\u3066\u3001WN-AC867U \u3067\u3042\u308c\u3070`rtl8812au`\u306e\u30d1\u30c3\u30b1\u30fc\u30b8\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3059\u308c\u3070\u5229\u7528\u3067\u304d\u308b\u53ef\u80fd\u6027\u304c\u3042\u308b\u3002\\n\\nWNPU583B \u306b\u95a2\u9023\u3059\u308b\u90e8\u5206\u306f\u30d2\u30c3\u30c8\u3057\u306a\u3044\u305f\u3081\u52d5\u4f5c\u3059\u308b\u304b\u4e0d\u660e\u3002\\n\\n(\u904e\u53bb\u306e\u7d4c\u9a13\u3067\u306f Kubuntu 20.04 \u306b\u304a\u3044\u3066 `rtl8821ce-dkms`\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3059\u308b\u3053\u3068\u3067 Bluetooth \u3060\u3051\u306f\u5229\u7528\u3067\u304d\u305f\u3002)"},{"id":"/2022/09/10/samba-on-raspberrypi-from-ios","metadata":{"permalink":"/2022/09/10/samba-on-raspberrypi-from-ios","source":"@site/blog/2022-09-10-samba-on-raspberrypi-from-ios.md","title":"\u3010Linux\u3011Raspberry Pi 4\u306eSamba\u30b5\u30fc\u30d0\u3078iPhone\u306e\u7d14\u6b63\u30a2\u30d7\u30ea\u304b\u3089\u63a5\u7d9a\u3059\u308b","description":"\u6982\u8981","date":"2022-09-10T00:00:00.000Z","formattedDate":"2022\u5e749\u670810\u65e5","tags":[{"label":"ubuntu","permalink":"/tags/ubuntu"},{"label":"linux","permalink":"/tags/linux"},{"label":"raspberrypi","permalink":"/tags/raspberrypi"},{"label":"samba","permalink":"/tags/samba"},{"label":"ios","permalink":"/tags/ios"}],"readingTime":4.51,"hasTruncateMarker":false,"authors":[{"name":"ogumaru","title":"ogumaru note owner","url":"https://github.com/ogumaru","imageURL":"https://github.com/ogumaru.png","key":"ogumaru"}],"frontMatter":{"title":"\u3010Linux\u3011Raspberry Pi 4\u306eSamba\u30b5\u30fc\u30d0\u3078iPhone\u306e\u7d14\u6b63\u30a2\u30d7\u30ea\u304b\u3089\u63a5\u7d9a\u3059\u308b","authors":"ogumaru","tags":["ubuntu","linux","raspberrypi","samba","ios"]},"prevItem":{"title":"\u3010Linux\u3011Ubuntu 22.04\u3067Wi-Fi\u30c9\u30f3\u30b0\u30eb\u306e\u30c9\u30e9\u30a4\u30d0\u3092Docker\u3067\u30d3\u30eb\u30c9\u3059\u308b","permalink":"/2022/10/01/build-wifi-dongle-driver"},"nextItem":{"title":"\u3010JavaScript\u3011Prisma\u306e\u5358\u7d14\u306a\u30ec\u30b3\u30fc\u30c9\u3092\u5024\u306e\u914d\u5217\u3068\u3057\u3066\u53d6\u5f97\u3059\u308b","permalink":"/2022/08/13/proxy-prisma-records"}},"content":"## \u6982\u8981\\n\\nRaspberry Pi 4 \u3092\u5229\u7528\u3057\u3066 LAN \u5185\u306b Samba \u30b5\u30fc\u30d0\u3092\u69cb\u7bc9\u3057\u3001iPhone \u306b\u6a19\u6e96\u3067\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3055\u308c\u3066\u3044\u308b\u300c\u30d5\u30a1\u30a4\u30eb\u300d\u30a2\u30d7\u30ea\u304b\u3089\u306e\u63a5\u7d9a\u3092\u884c\u3046\\n\\n## \u74b0\u5883\\n\\n| \u9805\u76ee             | \u5185\u5bb9                   |\\n| ---------------- | ---------------------- |\\n| \u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u6a5f\u7a2e | iPhone 8 Plus          |\\n| \u30af\u30e9\u30a4\u30a2\u30f3\u30c8 OS  | iOS 15.6.1             |\\n| \u30b5\u30fc\u30d0\u6a5f\u7a2e       | Raspberry Pi 4 Model B |\\n\\nRaspberry Pi OS \u306f\u30d0\u30fc\u30b8\u30e7\u30f3\u304c\u306a\u3044\u3089\u3057\u3044\u305f\u3081\u4e0b\u8a18\u3067\u78ba\u8a8d\\n\\n(\u30d9\u30fc\u30bf\u7248\u3067\u51fa\u305f 64-bit \u306e OS \u3092\u5165\u308c\u305f\u8a18\u61b6\u304c\u3042\u308b)\\n\\n```bash\\nuname -a\\n# > Linux raspberrypi 5.10.103-v8+ #1529 SMP PREEMPT Tue Mar 8 12:26:46 GMT 2022 aarch64 GNU/Linux\\nlsb_release -a\\n# > No LSB modules are available.\\n# > Distributor ID:\\tDebian\\n# > Description:\\tDebian GNU/Linux 10 (buster)\\n# > Release:\\t10\\n# > Codename:\\tbuster\\n```\\n\\n```bash\\nsamba --version\\n# > Version 4.9.5-Debian\\n```\\n\\n## \u6e96\u5099\\n\\n### Samba \u30d1\u30c3\u30b1\u30fc\u30b8\\n\\n```bash\\nsudo apt update\\nsudo apt install samba\\n# iOS \u3084 macOS\u3067\u3082\u5229\u7528\u3059\u308b\u5834\u5408\\nsudo apt install samba-vfs-modules\\n```\\n\\n### \u30e6\u30fc\u30b6\\n\\n\u3053\u3053\u306f[Samba - ArchWiki (wiki.archlinux.jp)](https://wiki.archlinux.jp/index.php/Samba)\u3092\u53c2\u8003\u306b\u8a2d\u5b9a\u3057\u305f\\n\\n```bash\\n# Samba\u30e6\u30fc\u30b6\u306e\u8ffd\u52a0\\nsudo pdbedit -a \\"$(whoami)\\"\\n\\n# `usershare path` \u3067\u6307\u5b9a\u3059\u308b`/var/lib/samba/usershares` \u306b\u30a2\u30af\u30bb\u30b9\u3059\u308b\u305f\u3081\\n# (\u6240\u6709\u8005:\u30b0\u30eb\u30fc\u30d7 \u304c root:sambashare \u306b\u306a\u3063\u3066\u3044\u308b)\\nsudo gpasswd sambashare -a \\"$(whoami)\\"\\n```\\n\\n\u30b0\u30eb\u30fc\u30d7\u8a2d\u5b9a\u3092\u53cd\u6620\u3055\u305b\u308b\u305f\u3081\u518d\u30ed\u30b0\u30a4\u30f3\u3059\u308b\\n\\n### \u30d5\u30a1\u30a4\u30a2\u30a6\u30a9\u30fc\u30eb\\n\\n[Firewalling Samba (www.samba.org)](https://www.samba.org/~tpot/articles/firewall.html)\u306b\u3088\u308b\u3068\u3001\u8a31\u53ef\u3059\u308b\u306e\u306f\u4e0b\u8a18\\n\\n| \u30d7\u30ed\u30c8\u30b3\u30eb | \u30dd\u30fc\u30c8 |\\n| ---------- | ------ |\\n| UDP        | 137    |\\n| UDP        | 138    |\\n| TCP        | 139    |\\n| TCP        | 445    |\\n\\n`ufw`\u3092\u5229\u7528\u3057\u3066\u3044\u308c\u3070\u4e0b\u8a18\\n\\n```bash\\n# Samba \u306e\u30eb\u30fc\u30eb\u304c\u3042\u308c\u3070\u5229\u7528\\nsudo ufw app list | grep -i samba\\nsudo ufw allow samba\\n```\\n\\n## Samba \u306e\u8a2d\u5b9a\\n\\n### \u30b0\u30ed\u30fc\u30d0\u30eb\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\\n\\n```bash\\n# \u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u306e\u30d0\u30c3\u30af\u30a2\u30c3\u30d7\\nsudo cp -a /etc/samba/smb.conf{,.$(date \'+%Y-%m-%d_%H%M%S\').bak}\\n\\n# \u4e0b\u8a18\u5dee\u5206\u3092\u8ffd\u8a18\\nsudoedit /etc/samba/smb.conf\\n```\\n\\n```diff\\n[global]\\n+   usershare path = /var/lib/samba/usershares\\n+   # For supporting iOS / macOS\\n+   vfs objects = fruit streams_xattr\\n+   fruit:metadata = stream\\n+   fruit:model = MacSamba\\n+   fruit:posix_rename = yes\\n+   fruit:veto_appledouble = no\\n+   fruit:nfs_aces = no\\n+   fruit:wipe_intentionally_left_blank_rfork = yes\\n+   fruit:delete_empty_adfiles = yes\\n```\\n\\n\u4e0a\u8a18\u306e`vfs`\u3084`fruit`\u306e\u8a2d\u5b9a\u304c\u306a\u3044\u3068\u3001\u4fdd\u5b58\u306e\u969b\u306b\u300c\u64cd\u4f5c\u3092\u5b8c\u4e86\u3067\u304d\u307e\u305b\u3093\u3067\u3057\u305f\u300d\u300c\u5c5e\u6027\u304c\u898b\u3064\u304b\u308a\u307e\u305b\u3093\u300d\u306e\u3088\u3046\u306a\u30a8\u30e9\u30fc\u30e1\u30c3\u30bb\u30fc\u30b8\u304c\u8868\u793a\u3055\u308c\u308b\\n\\nVFS \u95a2\u9023\u306e\u8a2d\u5b9a\u5185\u5bb9\u306b\u3064\u3044\u3066\u306f\u4e0b\u8a18\u30da\u30fc\u30b8\u306e\u3082\u306e\u3092\u5229\u7528\u3057\u305f\\n\\n[Configure Samba to Work Better with Mac OS X - SambaWiki (wiki.samba.org)](https://wiki.samba.org/index.php/Configure_Samba_to_Work_Better_with_Mac_OS_X)\\n\\n### \u5171\u6709\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\\n\\n```bash\\n# \u5171\u6709\u3059\u308b\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u306e\u4f5c\u6210\\nmkdir -p ~/share\\n\\n# \u5171\u6709\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u306e\u4f5c\u6210\\nnet usershare add \\"share\\" ~/share/ \\"samba share\\" \\"$(whoami):f\\"\\n```\\n\\n\u6a29\u9650\u306e\u8a2d\u5b9a\u306b\u3064\u3044\u3066\u306f\\n[net (www.samba.org)](https://www.samba.org/samba/docs/current/man-html/net.8.html)\u306a\u3069\u3092\u53c2\u8003\u306b\u6307\u5b9a\u3059\u308b\\n\\n> The definition of a user defined share acl is: \\"user:permission\\", where user is a valid username on the system and permission can be \\"F\\", \\"R\\", or \\"D\\". \\"F\\" stands for \\"full permissions\\", ie. read and write permissions. \\"D\\" stands for \\"deny\\" for a user, ie. prevent this user from accessing this share. \\"R\\" stands for \\"read only\\", ie. only allow read access to this share (no creation of new files or directories or writing to files).\\n\\n### \u8a2d\u5b9a\u306e\u53cd\u6620\\n\\n```bash\\nsudo systemctl reload smbd.service\\n```\\n\\n## \u63a5\u7d9a\\n\\nmDNS \u3067\u540d\u524d\u89e3\u6c7a\u304c\u3067\u304d\u308c\u3070\u3001\u540c\u3058\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u306b\u3064\u306a\u3044\u3060\u4e0a\u3067 iOS \u306e\u300c\u30d5\u30a1\u30a4\u30eb\u300d\u304b\u3089\\n\\n1. [\u30d6\u30e9\u30a6\u30ba]\\n1. \u53f3\u4e0a\u306e\u4e38\u3067\u56f2\u307e\u308c\u305f\u4e09\u70b9(\u2026)\\n1. [\u30b5\u30fc\u30d0\u3078\u63a5\u7d9a]\\n1. `raspberrypi.local`\u306a\u3069\\n1. [\u767b\u9332\u30e6\u30fc\u30b6] \u3092\u9078\u629e\\n1. Raspberry Pi \u306e\u30e6\u30fc\u30b6\u60c5\u5831\u3092\u5165\u529b\\n\\n\u3067\u63a5\u7d9a\u3067\u304d\u308b\\n\\n\u4f8b\u3048\u3070\u5199\u771f\u306f\u5171\u6709\u304b\u3089\u300c\\"\u30d5\u30a1\u30a4\u30eb\\"\u306b\u4fdd\u5b58\u300d\u304b\u3089\u4e0a\u8a18\u30d5\u30a9\u30eb\u30c0\u3092\u9078\u629e\u3059\u308b\u3053\u3068\u3067\u4fdd\u5b58\u3067\u304d\u308b\\n\\n\u5f53\u521d VFS \u95a2\u9023(`vfs`\u3084`fruit`)\u3092\u8a2d\u5b9a\u3057\u3066\u304a\u3089\u305a\u3001\u3053\u3053\u3067\u4fdd\u5b58\u304c\u3067\u304d\u305a\u306b\u56f0\u3063\u3066\u304b\u306a\u308a\u6642\u9593\u3092\u4f7f\u3063\u305f\\n\\n## \u30d1\u30d5\u30a9\u30fc\u30de\u30f3\u30b9\u306b\u3064\u3044\u3066\\n\\n1MB \u306e\u753b\u50cf\u3092\u30b3\u30d4\u30fc\u3059\u308b\u306e\u306b \u4f53\u611f\u3067 1 \u79d2\u7a0b\u5ea6\\n\\n10MB \u306e\u52d5\u753b\u3092\u30b3\u30d4\u30fc\u3059\u308b\u306e\u306b \u4f53\u611f\u3067 2 \u301c 3 \u79d2\u7a0b\u5ea6\\n\\nSSD \u3092\u63a5\u7d9a\u3057\u305f USB \u30d6\u30fc\u30c8\u3067\u5229\u7528\u3057\u3066\u3044\u308b\u305f\u3081\u3001Raspberry Pi \u74b0\u5883\u306e\u4e2d\u3067\u306f\u6bd4\u8f03\u7684 I/O \u306f\u65e9\u3044\u306f\u305a\\n\\nmicroSD \u74b0\u5883\u3067\u306f\u3082\u3046\u5c11\u3057\u9045\u3044\u304b\u3082\u3057\u308c\u306a\u3044"},{"id":"/2022/08/13/proxy-prisma-records","metadata":{"permalink":"/2022/08/13/proxy-prisma-records","source":"@site/blog/2022-08-13-proxy-prisma-records/index.md","title":"\u3010JavaScript\u3011Prisma\u306e\u5358\u7d14\u306a\u30ec\u30b3\u30fc\u30c9\u3092\u5024\u306e\u914d\u5217\u3068\u3057\u3066\u53d6\u5f97\u3059\u308b","description":"\u6982\u8981","date":"2022-08-13T00:00:00.000Z","formattedDate":"2022\u5e748\u670813\u65e5","tags":[{"label":"javascript","permalink":"/tags/javascript"},{"label":"prisma","permalink":"/tags/prisma"}],"readingTime":2.66,"hasTruncateMarker":false,"authors":[{"name":"ogumaru","title":"ogumaru note owner","url":"https://github.com/ogumaru","imageURL":"https://github.com/ogumaru.png","key":"ogumaru"}],"frontMatter":{"title":"\u3010JavaScript\u3011Prisma\u306e\u5358\u7d14\u306a\u30ec\u30b3\u30fc\u30c9\u3092\u5024\u306e\u914d\u5217\u3068\u3057\u3066\u53d6\u5f97\u3059\u308b","authors":"ogumaru","tags":["javascript","prisma"]},"prevItem":{"title":"\u3010Linux\u3011Raspberry Pi 4\u306eSamba\u30b5\u30fc\u30d0\u3078iPhone\u306e\u7d14\u6b63\u30a2\u30d7\u30ea\u304b\u3089\u63a5\u7d9a\u3059\u308b","permalink":"/2022/09/10/samba-on-raspberrypi-from-ios"},"nextItem":{"title":"\u3010JavaScript\u3011\u30d7\u30ea\u30df\u30c6\u30a3\u30d6\u3067\u306a\u3044\u5024\u3092\u6301\u3064Set\u306b\u3066\u91cd\u8907\u304c\u767a\u751f\u3059\u308b","permalink":"/2022/07/18/duplicated-value-in-set"}},"content":"## \u6982\u8981\\n\\nPrisma \u3092\u5229\u7528\u3057\u3066\u3001 1:N \u306e\u30ea\u30ec\u30fc\u30b7\u30e7\u30f3\u3092\u6301\u3064\u5358\u7d14\u306a\u30ec\u30b3\u30fc\u30c9\u306e\u5024\u3092\u914d\u5217\u3068\u3057\u3066\u53d6\u5f97\u3059\u308b\u3002\\n\\n## \u7d50\u8ad6\\n\\n`Proxy`\u3092\u5229\u7528\u3059\u308b\u3002\\n\\n## \u5b9f\u884c\u74b0\u5883\\n\\n| \u5b9f\u884c\u74b0\u5883       | \u30d0\u30fc\u30b8\u30e7\u30f3 |\\n| -------------- | ---------- |\\n| node           | v16.15.0   |\\n| prisma         | 4.2.1      |\\n| @prisma/client | 4.2.1      |\\n\\n## \u3084\u308a\u305f\u3044\u3053\u3068\\n\\n![Leaves\u3068Branches\u306eER\u56f3](mermaid-diagram-2022-08-13-123036.svg \\"\u5358\u7d14\u306a1:N\u306eER\u56f3\\")\\n\\n<details>\\n<summary>schema.prisma</summary>\\n\\n```prisma\\ngenerator client {\\n  provider = \\"prisma-client-js\\"\\n}\\n\\ndatasource db {\\n  provider = \\"sqlite\\"\\n  url      = env(\\"DATABASE_URL\\")\\n}\\n\\nmodel Branches {\\n  id     Int      @id @default(autoincrement())\\n  leaves Leaves[]\\n}\\n\\nmodel Leaves {\\n  id       Int      @id @default(autoincrement())\\n  branch   Branches @relation(fields: [branchId], references: [id])\\n  branchId Int\\n  value    String\\n}\\n```\\n\\n</details>\\n\\n\u4e0a\u56f3\u306e\u5358\u7d14\u306a `Branches`:`Leaves` = 1:N \u3068\u306a\u308b\u30c6\u30fc\u30d6\u30eb\u306b\u5bfe\u3057\u3066\u3001Prisma \u3067\u53d6\u5f97\u3057\u305f\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u306b\u5bfe\u3057\u3001\\n\\n```javascript\\nconsole.log(branches.leaves)\\n> [\\"hoge\\", \\"huga\\", ...]\\n```\\n\\n\u306e\u3088\u3046\u306b\u30d7\u30ed\u30d1\u30c6\u30a3\u30a2\u30af\u30bb\u30b9\u3067\u5b50\u3068\u306a\u308b\u30ec\u30b3\u30fc\u30c9\u306e\u5024\u306e\u307f\u3092\u53d6\u5f97\u3057\u305f\u3044\u3002\\n\\n## \u5b9f\u969b\u306e\u6319\u52d5\\n\\nPrisma \u3067\u306f\u30ec\u30b3\u30fc\u30c9\u306f\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u3068\u306a\u308b\u3002\\n\\n```typescript\\nconst select = async () => {\\n  const branch = await prisma.branches.findFirstOrThrow({\\n    include: { leaves: true },\\n  });\\n  return branch;\\n};\\n```\\n\\n\u3068\u3059\u308b\u3068\u4e0b\u8a18\u306e\u3088\u3046\u306a\u5f62\u3067\u30ec\u30b3\u30fc\u30c9\u304c\u8fd4\u3055\u308c\u308b\u3002\\n\\n```json\\n{\\n  \\"id\\": 1,\\n  \\"leaves\\": [\\n    {\\n      \\"id\\": 1,\\n      \\"branchId\\": 1,\\n      \\"value\\": \\"hoge\\"\\n    },\\n    {\\n      \\"id\\": 2,\\n      \\"branchId\\": 1,\\n      \\"value\\": \\"huga\\"\\n    }\\n  ]\\n}\\n```\\n\\n## Proxy \u3092\u5229\u7528\u3057\u305f\u30eb\u30fc\u30c6\u30a3\u30f3\u30b0\\n\\n`leaves`\u306b\u5bfe\u3059\u308b\u30a2\u30af\u30bb\u30b9\u3092\u4e0b\u8a18\u306e\u3088\u3046\u306b\u51e6\u7406\u3059\u308b\u3068\u5024\u306e\u914d\u5217\u3068\u3057\u3066\u53d6\u5f97\u3067\u304d\u308b\u3002\\n\\n```typescript\\ninterface ILeaf {\\n  id: number;\\n  value: string;\\n}\\n\\ninterface IBranch {\\n  id: number;\\n  leaves: Array<ILeaf>;\\n}\\n\\nconst select = async () => {\\n  const proxy: ProxyHandler<IBranch> = {\\n    get: (obj, prop) => {\\n      if (prop === \\"leaves\\") {\\n        return obj.leaves.map((leaf) => leaf.value);\\n      } else {\\n        if (Object.hasOwn(obj, prop)) {\\n          return obj[prop as keyof IBranch];\\n        } else {\\n          return undefined;\\n        }\\n      }\\n    },\\n  };\\n  const branch = await prisma.branches.findFirstOrThrow({\\n    include: { leaves: true },\\n  });\\n  return new Proxy(branch, proxy);\\n};\\n```\\n\\n`leaves`\u306f\u5358\u7d14\u306a\u5024\u306e\u914d\u5217\u3068\u306a\u308b\u3002\\n\\n```json\\n{\\n  \\"id\\": 1,\\n  \\"leaves\\": [\\"hoge\\", \\"huga\\"]\\n}\\n```\\n\\n## \u7559\u610f\u70b9\\n\\n\u30d7\u30ed\u30d1\u30c6\u30a3\u3092\u30d7\u30e9\u30a4\u30d9\u30fc\u30c8\u306b\u3059\u308b\u3082\u306e\u3067\u306f\u306a\u3044\u305f\u3081\u3001\u5024\u306e\u66f4\u65b0\u3092\u3059\u308b\u5834\u5408\u306b\u306f\u6ce8\u610f\u304c\u5fc5\u8981\u3002\\n\\n```javascript\\nconst records = {\\n  private: [\\n    { id: 0, value: \\"secret\\" },\\n    { id: 1, value: \\"keys\\" },\\n  ],\\n};\\n\\nconst proxy = {\\n  get: (obj, prop) => {\\n    if (prop === \\"private\\") {\\n      return obj[prop].map((record) => record.value);\\n    } else {\\n      return obj[prop];\\n    }\\n  },\\n};\\nconst proxied = new Proxy(records, proxy);\\n\\nconsole.log(proxied.private);\\n// > [ { id: 0, value: \'secret\' }, { id: 1, value: \'keys\' } ]\\n\\nproxied.private = [\\"hoge\\", \\"huga\\"];\\n\\nconsole.log(proxied.private);\\n// > [ undefined, undefined ]\\n```"},{"id":"/2022/07/18/duplicated-value-in-set","metadata":{"permalink":"/2022/07/18/duplicated-value-in-set","source":"@site/blog/2022-07-18-duplicated-value-in-set.md","title":"\u3010JavaScript\u3011\u30d7\u30ea\u30df\u30c6\u30a3\u30d6\u3067\u306a\u3044\u5024\u3092\u6301\u3064Set\u306b\u3066\u91cd\u8907\u304c\u767a\u751f\u3059\u308b","description":"\u6982\u8981","date":"2022-07-18T00:00:00.000Z","formattedDate":"2022\u5e747\u670818\u65e5","tags":[{"label":"javascript","permalink":"/tags/javascript"},{"label":"python","permalink":"/tags/python"}],"readingTime":4.295,"hasTruncateMarker":false,"authors":[{"name":"ogumaru","title":"ogumaru note owner","url":"https://github.com/ogumaru","imageURL":"https://github.com/ogumaru.png","key":"ogumaru"}],"frontMatter":{"title":"\u3010JavaScript\u3011\u30d7\u30ea\u30df\u30c6\u30a3\u30d6\u3067\u306a\u3044\u5024\u3092\u6301\u3064Set\u306b\u3066\u91cd\u8907\u304c\u767a\u751f\u3059\u308b","authors":"ogumaru","tags":["javascript","python"]},"prevItem":{"title":"\u3010JavaScript\u3011Prisma\u306e\u5358\u7d14\u306a\u30ec\u30b3\u30fc\u30c9\u3092\u5024\u306e\u914d\u5217\u3068\u3057\u3066\u53d6\u5f97\u3059\u308b","permalink":"/2022/08/13/proxy-prisma-records"}},"content":"## \u6982\u8981\\n\\nTypeScript \u306b\u3066\u3001\u30bf\u30d7\u30eb\u98a8(`[T, T]`)\u306e\u914d\u5217\u306e\u30b3\u30ec\u30af\u30b7\u30e7\u30f3\u304c\u3042\u308a\u3001\u3053\u308c\u306e\u4e2d\u8eab\u3092\u30e6\u30cb\u30fc\u30af\u306b\u3057\u305f\u3044\u5834\u9762\u304c\u3042\u3063\u305f\u3002\\n\\n`Set`\u3092\u7d4c\u7531\u3059\u308c\u3070\u91cd\u8907\u6392\u9664\u3067\u304d\u308b\u3068\u601d\u3063\u305f\u304c\u3001\u898b\u305f\u76ee\u4e0a\u540c\u3058\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u306e\u91cd\u8907\u306f\u6392\u9664\u3055\u308c\u306a\u304b\u3063\u305f\u3002\\n\\n## \u7d50\u8ad6\\n\\nJavaScript \u306b\u304a\u3051\u308b\u914d\u5217\u306e\u540c\u5024\u6bd4\u8f03\u304c`false`\u306b\u306a\u308b\u305f\u3081\u3002\\n\\n\u53b3\u5bc6\u306b\u30e6\u30cb\u30fc\u30af\u306a\u30b3\u30ec\u30af\u30b7\u30e7\u30f3\u3092\u4f5c\u6210\u3059\u308b\u5834\u5408\u306f\u3001deepEqual \u76f8\u5f53\u306e\u78ba\u8a8d\u304c\u5fc5\u8981\u305d\u3046\u3002\\n\\n## \u5b9f\u884c\u74b0\u5883\\n\\n| \u5b9f\u884c\u74b0\u5883 | \u30d0\u30fc\u30b8\u30e7\u30f3      |\\n| ------------- | --------------------- |\\n| node        | v16.15.0            |\\n| python3  | Python 3.10.4 |\\n\\n## JavaScript \u306e\u6319\u52d5\u3068 Python \u3068\u306e\u6bd4\u8f03\\n\\n\u30bf\u30d7\u30eb\u98a8\u306e\u914d\u5217\u30ea\u30c6\u30e9\u30eb\u3092`add`\u3059\u308b\u3068\u3001\u91cd\u8907\u3057\u305f\u5024\u304c\u305d\u308c\u305e\u308c\u304c\u8ffd\u52a0\u3055\u308c\u3066\u3057\u307e\u3046\u3002\\n\\n```javascript\\nconst unique = new Set();\\nunique.add([\\"hoge\\", \\"huga\\"]);\\n// Set(1) { [ \'hoge\', \'huga\' ] }\\nunique.add([\\"hoge\\", \\"huga\\"]);\\n// Set(2) { [ \'hoge\', \'huga\' ], [ \'hoge\', \'huga\' ] }\\n```\\n\\nPython \u3067\u306f\u3067\u304d\u305f\u6c17\u304c\u3057\u305f\u306e\u3067\u78ba\u8a8d\u3059\u308b\u3002\\n\\n(\u306a\u304a`[\\"hoge\\", \\"huga\\"]`\u306f`Hashable`\u3067\u306a\u3044\u305f\u3081`set`\u306b\u306f\u8ffd\u52a0\u3067\u304d\u306a\u3044)\\n\\n```python\\nunique = set()\\nunique.add((\\"hoge\\", \\"huga\\"))\\n# {(\'hoge\', \'huga\')}\\nunique.add((\\"hoge\\", \\"huga\\"))\\n# {(\'hoge\', \'huga\')}\\n```\\n\\n\u30ea\u30c6\u30e9\u30eb\u306e\u30bf\u30d7\u30eb\u306b\u5bfe\u3057\u3066\u91cd\u8907\u6392\u9664\u304c\u3067\u304d\u3066\u3044\u308b\u3002\\n\\nJavaScript \u3067\u3082\u3001\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u304c\u540c\u4e00\u306b\u306a\u308b\u305f\u3081\u3001\u4e0b\u8a18\u3067\u306f\u610f\u56f3\u3057\u305f\u901a\u308a\u306b\u91cd\u8907\u304c\u6392\u9664\u3055\u308c\u308b\u3002\\n\\n```javascript\\nconst unique = new Set();\\nconst tuple = [\\"hoge\\", \\"huga\\"];\\nunique.add(tuple);\\n// Set(1) { [ \'hoge\', \'huga\' ] }\\nunique.add(tuple);\\n// Set(1) { [ \'hoge\', \'huga\' ] }\\n```\\n\\nJavaScript \u3067\u306f Python \u306b\u304a\u3051\u308b\u30bf\u30d7\u30eb\u76f8\u5f53\u306e\u30c7\u30fc\u30bf\u578b\u304c\u306a\u3044\u305f\u3081\u3001\u4e0a\u8a18\u30b3\u30fc\u30c9\u3067\u306f\u5b9f\u969b\u306b\u306f\u30df\u30e5\u30fc\u30bf\u30d6\u30eb\u306a\u914d\u5217\u3068\u306a\u308b\u3002\\n\\n`Object.freeze()`\u3067\u30a4\u30df\u30e5\u30fc\u30bf\u30d6\u30eb\u306b\u3057\u3066\u307f\u305f\u304c\u3001\u7d50\u679c\u306f\u5909\u308f\u3089\u306a\u304b\u3063\u305f\u3002\\n\\n```javascript\\nconst unique = new Set();\\nunique.add(Object.freeze([\\"hoge\\", \\"huga\\"]));\\n// Set(1) { [ \'hoge\', \'huga\' ] }\\nunique.add(Object.freeze([\\"hoge\\", \\"huga\\"]));\\n// Set(2) { [ \'hoge\', \'huga\' ], [ \'hoge\', \'huga\' ] }\\n```\\n\\n## \u4ed5\u69d8\u306e\u78ba\u8a8d\\n\\nMDN \u306e`Set`\u306e\u30da\u30fc\u30b8\u3092\u898b\u308b\u3068\u3001`-0`\u3068`+0`\u306b\u3064\u3044\u3066\u89e6\u308c\u3089\u308c\u3066\u3044\u308b\u3002\\n\\n> See \\"Key equality for -0 and 0\\" in the browser compatibility table for details.\\n\\n[Set - JavaScript | MDN (developer.mozilla.org)](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Set#value_equality)\\n\\n\u7b49\u4fa1\u6bd4\u8f03\u306e\u30da\u30fc\u30b8\u3092\u898b\u308b\u3068\u3001\\n\\n> SameValueZero: used by %TypedArray% and ArrayBuffer constructors, as well as Map and Set operations, and also String.prototype.includes and Array.prototype.includes since ES2016\\n\\n[Equality comparisons and sameness - JavaScript | MDN (developer.mozilla.org)](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Equality_comparisons_and_sameness)\\n\\n`SameValueZero`\u306e TC39 \u3078\u30ea\u30f3\u30af\u3055\u308c\u3066\u3044\u305f\u306e\u3067\u3053\u3061\u3089\u3082\u78ba\u8a8d\u3002\\n\\n> SameValueZero differs from SameValue only in that it treats +0\ud835\udd3d and -0\ud835\udd3d as equivalent.\\n\\n[SameValueZero | ECMAScript\xae 2023 Language\xa0Specification (tc39.es)](https://tc39.es/ecma262/#sec-samevaluezero)\\n\\n`SameValue`\u3068`+0`\u3068`-0`\u306e\u6bd4\u8f03\u7d50\u679c\u306e\u307f\u7570\u306a\u308b\u3068\u3042\u308b\u305f\u3081\u3001[`SameValue`](https://tc39.es/ecma262/#sec-samevalue)\u3092\u78ba\u8a8d\u3059\u308b\u3068\u3001\\n\\n> 1. If Type(x) is different from Type(y), return false.\\n> 2. If Type(x) is Number, then\\n>\\n>    a. Return Number::sameValue(x, y).\\n>\\n> 3. If Type(x) is BigInt, then\\n>\\n>    a. Return BigInt::sameValue(x, y).\\n>\\n> 4. Return SameValueNonNumeric(x, y).\\n\\n\u3068\u306e\u3053\u3068\u306a\u306e\u3067[`SameValueNonNumeric`](https://tc39.es/ecma262/#sec-samevaluenonnumeric)\u3092\u78ba\u8a8d\u3002\\n\\n> 1. Assert: Type(x) is the same as Type(y).\\n> 2. If Type(x) is Undefined, return true.\\n> 3. If Type(x) is Null, return true.\\n> 4. If Type(x) is String, then\\n>\\n>    a. If x and y are exactly the same sequence of code units (same length and same code units at corresponding indices), return true; otherwise, return false.\\n>\\n> 5. If Type(x) is Boolean, then\\n>\\n>    a. If x and y are both true or both false, return true; otherwise, return false.\\n>\\n> 6. If Type(x) is Symbol, then\\n>\\n>    a. If x and y are both the same Symbol value, return true; otherwise, return false.\\n>\\n> 7. If x and y are the same Object value, return true. Otherwise, return false.\\n\\n\u30bf\u30d7\u30eb\u306e\u5834\u5408`7`\u306b\u3066\u8a55\u4fa1\u3055\u308c\u308b\u3068\u601d\u308f\u308c\u3001`same Object value`\u3067\u306f\u306a\u3044\u3068\u3044\u3046\u3053\u3068\u306b\u306a\u308b\u3088\u3046\u3060\u3002\\n\\n## same Object value \u3068\u306f\\n\\nTC39\u306b\u306f\u3053\u308c\u4ee5\u4e0a\u306e\u30ea\u30f3\u30af\u304c\u306a\u304b\u3063\u305f\u304c\u3001deepEqual\u76f8\u5f53\u306e\u6bd4\u8f03\u3092\u884c\u3046\u3053\u3068\u3067\u91cd\u8907\u306e\u78ba\u8a8d\u306f\u3067\u304d\u305d\u3046\u3002\\n\\n\u4fee\u6b63 PR \u3044\u305f\u3060\u3051\u308b\u3068\u3042\u308a\u304c\u305f\u3044\u3067\u3059\u3002"}]}')}}]);